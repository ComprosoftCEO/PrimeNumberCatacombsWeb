(()=>{var t,e,n,i,r,a,o={7:(t,e,n)=>{"use strict";n.a(t,(async t=>{n.d(e,{z:()=>x});var i=n(6104),r=n(4888),a=n(7061),o=n(9900),s=n(240),u=n(4725),c=n(3977),l=n(2805),h=n(1930),f=n(5839),d=n(9616),v=n(3701),y=n(8927),m=n(6693),g=n(4799),p=n(5142),b=n(2730),k=n(2474),A=t([p,l,b]);function w(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}[p,l,b]=A.then?await A:A;var M={text:"Dead End",font:{fontFamily:g.F.ADrippingMarker,fontSize:96,alignment:"center",color:"#550000"},angle:0},x=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,a.Z)(this,t),(0,s.Z)(this,"area",void 0),(0,s.Z)(this,"catacombNumber",void 0),(0,s.Z)(this,"base",void 0),(0,s.Z)(this,"allowComposite",void 0),(0,s.Z)(this,"entries",void 0),(0,s.Z)(this,"torchTimer",void 0),(0,s.Z)(this,"camera",void 0),(0,s.Z)(this,"ambient",void 0),this.catacombNumber={value:e,isPrime:!0},this.base=n,this.allowComposite=i}return(0,o.Z)(t,[{key:"smallestIndex",get:function(){return 0-Math.floor(Math.max(this.entries.length-1,0)/2)}},{key:"largestIndex",get:function(){return 0+Math.ceil(Math.max(this.entries.length-1,0)/2)}},{key:"onCreate",value:function(t){this.area=t,this.computeEntries(),this.buildArea(),this.torchTimer=new b.O,this.area.createEntity(this.torchTimer),this.ambient=this.area.createAudio("Ambient"),this.ambient.play(!0)}},{key:"computeEntries",value:function(){var t=this;if(this.catacombNumber.isPrime){var e=k("".concat(this.catacombNumber.value,"-Entries")),n=(0,l.KD)(this.catacombNumber.value,this.base),i=n.filter((function(e){var n=e.isPrime,i=e.value;return t.allowComposite?"0"!==i:n})).map((function(t){return{isArchway:!0,catacombNumber:t}}));if(0!==n.length){var a=(0,c.Iy)(0,Math.ceil(i.length/2),e),o=new Array(a).fill(null).map((function(){return{isArchway:!1,showGraffiti:e()<.4}}));this.entries=(0,c.Sy)([].concat((0,r.Z)(i),(0,r.Z)(o)),!1,e)}else this.entries=[]}else this.entries=[]}},{key:"buildArea",value:function(){var t=this,e=this.entries.map((function(e,n){return{text:e.isArchway?e.catacombNumber.value:void 0,relativePosition:t.smallestIndex+n,showGraffiti:!1===e.isArchway?e.showGraffiti:void 0}}));this.area.createEntity(new d.y(Math.ceil(this.entries.length/2)));var n=e.filter((function(t){return void 0!==t.text}));n.length>0&&this.area.createEntity(new v.S(n));var r=e.filter((function(t){return void 0===t.text}));r.length>0&&this.area.createEntity(new m.L(r));var a,o=w(e.filter((function(t){return t.showGraffiti})).entries());try{for(o.s();!(a=o.n()).done;){var s=(0,i.Z)(a.value,2),u=s[0],l=s[1].relativePosition;this.area.createEntity(new g.m(l,{seed:"".concat(this.catacombNumber.value,"-Graffiti-").concat(u)}))}}catch(t){o.e(t)}finally{o.f()}0===this.entries.length&&(this.area.createEntity(new m.L([{relativePosition:0}])),this.area.createEntity(new g.m(0,M)),this.area.createEntity(new p.S)),this.area.createEntity(new y.d(y.M.Left,this.smallestIndex)),this.area.createEntity(new y.d(y.M.Right,this.largestIndex));var b=k("".concat(this.catacombNumber.value,"-Start"));this.camera=new f.W((0,c.Iy)(this.smallestIndex,this.largestIndex,b)),this.area.createEntity(this.camera),this.area.createEntity(new h.a)}},{key:"movedTo",value:function(t){var e,n=w(this.area.findEntities("torch-entity"));try{for(n.s();!(e=n.n()).done;)e.value.state.setTorchPosition(t)}catch(t){n.e(t)}finally{n.f()}}},{key:"canEnterDoor",value:function(t){var e=this.entries[t-this.smallestIndex];return void 0!==e&&e.isArchway}},{key:"enterDoor",value:function(t){this.clearArea();var e=this.entries[t-this.smallestIndex];void 0!==e&&e.isArchway?this.catacombNumber=e.catacombNumber:this.catacombNumber.isPrime=!1,this.torchTimer.enteredDoor(),this.computeEntries(),this.buildArea()}},{key:"clearArea",value:function(){var t,e=w(this.area.findEntities("layout-entity"));try{for(e.s();!(t=e.n()).done;)t.value.destroy()}catch(t){e.e(t)}finally{e.f()}var n,i=w(this.area.findEntities("camera"));try{for(i.s();!(n=i.n()).done;)n.value.destroy()}catch(t){i.e(t)}finally{i.f()}}},{key:"onDispose",value:function(){}},{key:"onTimer",value:function(t){}},{key:"onStep",value:function(){this.area.game.input.isMouseButtonDown(u.tc.Left)&&this.ambient.audio.context.resume()}},{key:"onDraw",value:function(t){}}]),t}()}))},778:(t,e,n)=>{"use strict";n.a(t,(async t=>{n.d(e,{x:()=>v});var i,r=n(7061),a=n(9900),o=n(240),s=n(1930),u=n(3701),c=n(9616),l=n(5839),h=n(7),f=t([h]);function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}h=(f.then?await f:f)[0],function(t){t[t.TestForMovement=0]="TestForMovement"}(i||(i={}));var v=function(){function t(){(0,r.Z)(this,t),(0,o.Z)(this,"smallestIndex",0),(0,o.Z)(this,"largestIndex",0),(0,o.Z)(this,"area",void 0),(0,o.Z)(this,"camera",void 0),(0,o.Z)(this,"hideText",!1)}return(0,a.Z)(t,[{key:"onCreate",value:function(t){this.area=t,this.area.createEntity(new c.y),this.area.createEntity(new u.S([{relativePosition:0}])),this.camera=new l.W,this.area.createEntity(this.camera),this.area.createEntity(new s.a),this.area.setTimer(i.TestForMovement,11,!0)}},{key:"movedTo",value:function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(this.area.findEntities("torch-entity"));try{for(n.s();!(e=n.n()).done;)e.value.state.setTorchPosition(t)}catch(t){n.e(t)}finally{n.f()}}},{key:"canEnterDoor",value:function(t){return 0===t}},{key:"enterDoor",value:function(t){this.area.game.setArea(new h.z("2"))}},{key:"onDispose",value:function(){}},{key:"onTimer",value:function(t){switch(t){case i.TestForMovement:this.area.setTimer(i.TestForMovement,1,!0),this.camera.isMoving&&(this.hideText=!0)}}},{key:"onStep",value:function(){}},{key:"onDraw",value:function(t){if(!this.hideText){t.font='bold 36pt "Special Elite"',t.textAlign="center",t.textBaseline="top",t.fillStyle="#9c7300",t.fillText("Prime Number Catacombs",this.area.overlayWidth/2,20),t.beginPath(),t.strokeStyle="black",t.lineWidth=.01,t.strokeText("Prime Number Catacombs",this.area.overlayWidth/2,20),t.stroke(),t.font="14pt sans-serif",t.fillStyle="#dddddd";var e=t.measureText("Created by Bryan McClain");t.fillText("Created by Bryan McClain",this.area.overlayWidth/2,this.area.overlayHeight-2*e.actualBoundingBoxDescent)}}}]),t}()}))},9780:(t,e,n)=>{"use strict";n.d(e,{fo:()=>l,b0:()=>h,Sp:()=>f});var i=n(7061),r=n(9900),a=n(240),o=n(6709),s=n(4418),u=n(7623),c=n.n(u),l=console.log,h=function(t){throw new Error(t)},f=function(){function t(){(0,i.Z)(this,t),(0,a.Z)(this,"audioLoader",void 0),(0,a.Z)(this,"imageLoader",void 0),(0,a.Z)(this,"textureLoader",void 0),(0,a.Z)(this,"cubeTextureLoader",void 0),(0,a.Z)(this,"objectLoader",void 0),(0,a.Z)(this,"materialLoader",void 0),(0,a.Z)(this,"animationLoader",void 0),(0,a.Z)(this,"gltfLoader",void 0),(0,a.Z)(this,"fontLoader",void 0),(0,a.Z)(this,"textures",{}),(0,a.Z)(this,"sounds",{}),(0,a.Z)(this,"images",{}),(0,a.Z)(this,"objects",{}),(0,a.Z)(this,"materials",{}),(0,a.Z)(this,"animations",{}),(0,a.Z)(this,"fonts",{}),(0,a.Z)(this,"progressHandler",l),(0,a.Z)(this,"errorHandler",h),this.audioLoader=new o.AudioLoader,this.imageLoader=new o.ImageLoader,this.textureLoader=new o.TextureLoader,this.cubeTextureLoader=new o.CubeTextureLoader,this.objectLoader=new o.ObjectLoader,this.materialLoader=new o.MaterialLoader,this.animationLoader=new o.AnimationLoader,this.gltfLoader=new s.E,this.fontLoader=new o.FontLoader}return(0,r.Z)(t,[{key:"loadTexture",value:function(t,e){var n=this;return this.textureLoader.loadAsync(e,this.onProgress("texture",t,e)).then((function(e){n.textures[t]=e})).catch(this.onError("texture",t,e))}},{key:"loadCubeTexture",value:function(t,e){var n=this;return new Promise((function(i){var r=e.positiveX,a=e.negativeX,o=e.positiveY,s=e.negativeY,u=e.positiveZ,c=e.negativeZ;n.cubeTextureLoader.load([r,a,o,s,u,c],(function(e){n.textures[t]=e,i()}),n.onProgress("cube texture",t,e.toString()),n.onError("cube texture",t,e.toString()))}))}},{key:"saveTexture",value:function(t,e){this.textures[t]=e}},{key:"getTexture",value:function(t){var e=this.textures[t];if(void 0===e)throw new Error("No such loaded texture '".concat(t,"'"));return e}},{key:"hasTexture",value:function(t){return void 0!==this.textures[t]}},{key:"loadAudioFile",value:function(t,e){var n=this;return this.audioLoader.loadAsync(e,this.onProgress("audio",t,e)).then((function(e){n.sounds[t]=e})).catch(this.onError("audio",t,e))}},{key:"saveAudio",value:function(t,e){this.sounds[t]=e}},{key:"getAudio",value:function(t){var e=this.sounds[t];if(void 0===e)throw new Error("No such loaded audio buffer '".concat(t,"'"));return e}},{key:"hasAudio",value:function(t){return void 0!==this.sounds[t]}},{key:"loadImage",value:function(t,e){var n=this;return this.imageLoader.loadAsync(e,this.onProgress("image",t,e)).then((function(e){n.images[t]=e})).catch(this.onError("image",t,e))}},{key:"saveImage",value:function(t,e){this.images[t]=e}},{key:"getImage",value:function(t){var e=this.images[t];if(void 0===e)throw new Error("No such loaded image '".concat(t,"'"));return e}},{key:"hasImage",value:function(t){return void 0!==this.images[t]}},{key:"loadObject",value:function(t,e){var n=this;return this.objectLoader.loadAsync(e,this.onProgress("object",t,e)).then((function(e){n.objects[t]=e})).catch(this.onError("object",t,e))}},{key:"saveObject",value:function(t,e){this.objects[t]=e}},{key:"getObject",value:function(t){var e=this.objects[t];if(void 0===e)throw new Error("No such loaded object '".concat(t,"'"));return e}},{key:"hasObject",value:function(t){return void 0!==this.objects[t]}},{key:"loadMaterial",value:function(t,e){var n=this;return this.materialLoader.loadAsync(e,this.onProgress("material",t,e)).then((function(e){n.materials[t]=e})).catch(this.onError("material",t,e))}},{key:"saveMaterial",value:function(t,e){this.materials[t]=e}},{key:"getMaterial",value:function(t){var e=this.materials[t];if(void 0===e)throw new Error("No such loaded material '".concat(t,"'"));return e}},{key:"hasMaterial",value:function(t){return void 0!==this.materials[t]}},{key:"loadAnimations",value:function(t,e){var n=this;return this.animationLoader.loadAsync(t,this.onProgress("animation",null,t)).then((function(t){return e(t,n)})).catch(this.onError("animation",null,t))}},{key:"saveAnimation",value:function(t,e){this.animations[t]=e}},{key:"getAnimation",value:function(t){var e=this.animations[t];if(void 0===e)throw new Error("No such loaded animation '".concat(t,"'"));return e}},{key:"hasAnimation",value:function(t){return void 0!==this.animations[t]}},{key:"loadGLTFFile",value:function(t,e){var n=this;return this.gltfLoader.loadAsync(t,this.onProgress("gltf",null,t)).then((function(t){return e(t,n)})).catch(this.onError("gltf",null,t))}},{key:"loadFont",value:function(t,e){var n=this;return this.fontLoader.loadAsync(e,this.onProgress("font",t,e)).then((function(e){n.fonts[t]=e})).catch(this.onError("font",t,e))}},{key:"saveFont",value:function(t,e){this.fonts[t]=e}},{key:"getFont",value:function(t){var e=this.fonts[t];if(void 0===e)throw new Error("No such loaded font '".concat(t,"'"));return e}},{key:"hasFont",value:function(t){return void 0!==this.fonts[t]}},{key:"onProgress",value:function(t,e,n){var i=this;return function(r){var a=null!==e?"'".concat(e,"' "):"",o="Loading ".concat(t," ").concat(a,"from '").concat(n,"': ").concat(c()(r.loaded));if(r.lengthComputable){var s=100*r.loaded/r.total;i.progressHandler("".concat(o," / ").concat(c()(r.total)," (").concat(s.toFixed(0),"%)"))}else i.progressHandler("".concat(o," Loaded"))}}},{key:"onError",value:function(t,e,n){var i=this,r=null!==e?"'".concat(e,"' "):"";return function(e){i.errorHandler("Error loading ".concat(t," ").concat(r,"from '").concat(n,"'").concat(e.message?": ".concat(e.message):""))}}}]),t}()},6398:(t,e,n)=>{"use strict";n.d(e,{l:()=>Z});var i=n(6104),r=n(7061),a=n(9900),o=n(240),s=n(6709),u=function(){function t(e,n){(0,r.Z)(this,t),(0,o.Z)(this,"ticksLeft",void 0),(0,o.Z)(this,"ticks",void 0),(0,o.Z)(this,"looping",void 0),(0,o.Z)(this,"running",void 0),this.ticksLeft=e,this.ticks=e,this.looping=n,this.running=!0}return(0,a.Z)(t,[{key:"isRunning",value:function(){return this.running}},{key:"setRunning",value:function(t){this.running=t}},{key:"tick",value:function(){switch(this.ticksLeft){case 0:return!1;case 1:return this.looping?this.ticksLeft=this.ticks:this.ticksLeft=0,!0;default:return this.ticksLeft-=1,!1}}}]),t}();new s.LineBasicMaterial({color:16777215}),new s.WireframeGeometry(new s.IcosahedronGeometry(1,2));var c=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),l=new s.Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3),h=((new s.BufferGeometry).setIndex(new s.BufferAttribute(c,1)).setAttribute("position",l),function(){function t(){(0,r.Z)(this,t),(0,o.Z)(this,"showMask",void 0)}return(0,a.Z)(t,[{key:"isCollidingWith",value:function(t){return!1}},{key:"intersectsBox",value:function(t){return!1}},{key:"intersectsSphere",value:function(t){return!1}},{key:"intersectRay",value:function(t){return null}},{key:"containsPoint",value:function(t){return!1}},{key:"update",value:function(t){}},{key:"_drawMask",value:function(t){}}]),t}());function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var d=function(){function t(e,n){(0,r.Z)(this,t),(0,o.Z)(this,"area",void 0),(0,o.Z)(this,"state",void 0),(0,o.Z)(this,"mask",void 0),(0,o.Z)(this,"timers",new Map),(0,o.Z)(this,"_isDestroyed",!1),(0,o.Z)(this,"_object",null),this.area=e,this.state=n,this.mask=new h}return(0,a.Z)(t,[{key:"destroy",value:function(){this._isDestroyed=!0}},{key:"isDestroyed",get:function(){return this._isDestroyed}},{key:"object",get:function(){return this._object},set:function(t){null!==this._object&&this.area.scene.remove(this._object),null!==t&&this.area.scene.add(t),this._object=t}},{key:"setTimer",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e<1||this.timers.set(t,new u(e,n))}},{key:"clearTimer",value:function(t){this.timers.delete(t)}},{key:"isCollidingWith",value:function(t){return this.mask.isCollidingWith(t.mask)}},{key:"_create",value:function(){this.state.onCreate(this)}},{key:"_destroy",value:function(){this.state.onDestroy(),this.mask.showMask=!1,null!==this._object&&this.area.scene.remove(this._object)}},{key:"_dispose",value:function(){this.state.onDispose()}},{key:"_tickTimers",value:function(){var t,e=[],n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(this.timers);try{for(n.s();!(t=n.n()).done;){var r=(0,i.Z)(t.value,2),a=r[0],o=r[1];o.isRunning()&&o.tick()&&e.push(a)}}catch(t){n.e(t)}finally{n.f()}for(var s=0,u=e;s<u.length;s++){var c=u[s];this.state.onTimer(c)}}},{key:"_step",value:function(){this.state.onStep()}},{key:"_draw",value:function(t){this.state.onDraw(t)}}]),t}(),v=function(){function t(e){(0,r.Z)(this,t),(0,o.Z)(this,"audio",void 0),this.audio=e}return(0,a.Z)(t,[{key:"volume",get:function(){return this.audio.getVolume()},set:function(t){this.audio.setVolume(t)}},{key:"loop",get:function(){return this.audio.getLoop()},set:function(t){this.audio.setLoop(t)}},{key:"isPlaying",get:function(){return this.audio.isPlaying}},{key:"play",value:function(t){this.audio.isPlaying&&this.audio.stop(),void 0!==t&&(this.loop=t),this.audio.play()}},{key:"stop",value:function(){this.audio.isPlaying&&this.audio.stop()}}]),t}();function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var g,p,b=function(){function t(e,n){(0,r.Z)(this,t),(0,o.Z)(this,"game",void 0),(0,o.Z)(this,"state",void 0),(0,o.Z)(this,"scene",void 0),(0,o.Z)(this,"audioListener",void 0),(0,o.Z)(this,"_camera",void 0),(0,o.Z)(this,"allEntities",new Set),(0,o.Z)(this,"taggedEntities",new Map),(0,o.Z)(this,"toCreate",new Set),(0,o.Z)(this,"timers",new Map),(0,o.Z)(this,"overlayWidth",768),(0,o.Z)(this,"overlayHeight",432),this.game=e,this.state=n,this.scene=new s.Scene,this.audioListener=new s.AudioListener,this._camera=new s.PerspectiveCamera,this._camera.add(this.audioListener)}return(0,a.Z)(t,[{key:"camera",get:function(){return this._camera},set:function(t){this._camera.remove(this.audioListener),t.add(this.audioListener),this._camera=t}},{key:"createEntity",value:function(t){var e=new d(this,t);return this.toCreate.add(e),e}},{key:"getAllEntities",value:function(){return Array.from(this.allEntities)}},{key:"findEntities",value:function(t){return this.taggedEntities.has(t)?Array.from(this.taggedEntities.get(t)):[]}},{key:"findFirstEntity",value:function(t){if(!this.taggedEntities.has(t))return null;var e=this.taggedEntities.get(t).values().next();return e.done?null:e.value}},{key:"setTimer",value:function(t,e,n){e<1||this.timers.set(t,new u(e,n))}},{key:"clearTimer",value:function(t){this.timers.delete(t)}},{key:"createAudio",value:function(t){var e=new s.Audio(this.audioListener);return t instanceof AudioBuffer?e.buffer=t:"string"==typeof t&&(e.buffer=this.game.assets.getAudio(t)),new v(e)}},{key:"createPositionalAudio",value:function(t){var e=new s.PositionalAudio(this.audioListener);return t instanceof AudioBuffer?e.buffer=t:"string"==typeof t&&(e.buffer=this.game.assets.getAudio(t)),new v(e)}},{key:"_tickTimers",value:function(){var t,e=[],n=y(this.timers);try{for(n.s();!(t=n.n()).done;){var r=(0,i.Z)(t.value,2),a=r[0],o=r[1];o.isRunning()&&o.tick()&&e.push(a)}}catch(t){n.e(t)}finally{n.f()}for(var s=0,u=e;s<u.length;s++){var c=u[s];this.state.onTimer(c)}}},{key:"_createEntities",value:function(){if(0!==this.toCreate.size){var t,e=y(this.toCreate);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.addEntityToArea(n)}}catch(t){e.e(t)}finally{e.f()}var i=this.toCreate;this.toCreate=new Set;var r,a=y(i);try{for(a.s();!(r=a.n()).done;)r.value._create()}catch(t){a.e(t)}finally{a.f()}}}},{key:"addEntityToArea",value:function(t){this.allEntities.add(t);var e,n=y(t.state.tags);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.addTaggedEntityToMap(t,i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"addTaggedEntityToMap",value:function(t,e){this.taggedEntities.has(e)||this.taggedEntities.set(e,new Set),this.taggedEntities.get(e).add(t)}},{key:"_destroyEntities",value:function(){var t,e=[],n=y(this.allEntities);try{for(n.s();!(t=n.n()).done;){var i=t.value;i.isDestroyed&&e.push(i)}}catch(t){n.e(t)}finally{n.f()}for(var r=0,a=e;r<a.length;r++){var o=a[r];this.removeEntityFromArea(o)}for(var s=0,u=e;s<u.length;s++)u[s]._destroy();for(var c=0,l=e;c<l.length;c++)l[c]._dispose()}},{key:"_disposeEntities",value:function(){var t,e=y(this.allEntities);try{for(e.s();!(t=e.n()).done;)t.value._dispose()}catch(t){e.e(t)}finally{e.f()}}},{key:"removeEntityFromArea",value:function(t){this.allEntities.delete(t);var e,n=y(t.state.tags);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.removeTaggedEntityFromMap(t,i)}}catch(t){n.e(t)}finally{n.f()}}},{key:"removeTaggedEntityFromMap",value:function(t,e){this.taggedEntities.has(e)&&this.taggedEntities.get(e).delete(t)}},{key:"_tickEntityTimers",value:function(){var t,e=y(this.allEntities);try{for(e.s();!(t=e.n()).done;)t.value._tickTimers()}catch(t){e.e(t)}finally{e.f()}}},{key:"_stepEntities",value:function(){var t,e=y(this.allEntities);try{for(e.s();!(t=e.n()).done;)t.value._step()}catch(t){e.e(t)}finally{e.f()}}},{key:"_drawScene",value:function(t,e){var n,i=y(this.allEntities);try{for(i.s();!(n=i.n()).done;)n.value.mask._drawMask(this.scene)}catch(t){i.e(t)}finally{i.f()}t.render(this.scene,this.camera);var r=e.getContext("2d");e.width=this.overlayWidth,e.height=this.overlayHeight,r.clearRect(0,0,this.overlayWidth,this.overlayHeight),this.state.onDraw(r);var a,o=y(this.allEntities);try{for(o.s();!(a=o.n()).done;)a.value._draw(r)}catch(t){o.e(t)}finally{o.f()}}}]),t}(),k=n(4725),A=n(9780);(p=g||(g={})).saveObject=function(t,e){window.localStorage.setItem(t,JSON.stringify(e))},p.loadObject=function(t,e){var n=window.localStorage.getItem(t);if(null===n){if(void 0!==e)return e;throw new Error("Key '".concat(t,"' does not exist in local storage"))}return JSON.parse(n)},p.removeObject=function(t){window.localStorage.removeItem(t)},p.exists=function(t){return null!==window.localStorage.getItem(t)},p.clear=function(){window.localStorage.clear()};var w=function(){function t(){(0,r.Z)(this,t),(0,o.Z)(this,"resources",{})}return(0,a.Z)(t,[{key:"setResource",value:function(t,e){this.resources[t]=e}},{key:"getResource",value:function(t,e){var n=this.resources[t];if(void 0===n){if(void 0!==e)return e;throw new Error("No such resource '".concat(t,"'"))}return n}},{key:"deleteResource",value:function(t){delete this.resources[t]}},{key:"exists",value:function(t){return void 0!==this.resources[t]}},{key:"clear",value:function(){this.resources={}}}]),t}(),Z=function(){function t(e,n){(0,r.Z)(this,t),(0,o.Z)(this,"input",void 0),(0,o.Z)(this,"assets",void 0),(0,o.Z)(this,"resources",void 0),(0,o.Z)(this,"screenSize",null),(0,o.Z)(this,"_currentArea",void 0),(0,o.Z)(this,"nextArea",null),(0,o.Z)(this,"renderer",void 0),(0,o.Z)(this,"canvas",void 0),(0,o.Z)(this,"overlayCanvas",void 0),(0,o.Z)(this,"running",!1),this.input=new k.$t(n),this.assets=new A.Sp,this.resources=new w,this.renderer=new s.WebGLRenderer({canvas:e}),this.canvas=e,this.overlayCanvas=n}return(0,a.Z)(t,[{key:"start",value:function(t){!1===this.running&&(this.running=!0,this._currentArea=new b(this,t),this._currentArea.state.onCreate(this._currentArea),this.overlayCanvas.focus(),requestAnimationFrame(this.tick.bind(this)))}},{key:"stop",value:function(){this.running=!1}},{key:"currentArea",get:function(){return this._currentArea}},{key:"setArea",value:function(t){null===this.nextArea&&(this.nextArea=t)}},{key:"canvasWidth",get:function(){return this.canvas.width}},{key:"canvasHeight",get:function(){return this.canvas.height}},{key:"overlayWidth",get:function(){return this.overlayCanvas.width}},{key:"overlayHeight",get:function(){return this.overlayCanvas.height}},{key:"tick",value:function(){this.resizeCanvas(),null!==this.nextArea&&(this.currentArea.state.onDispose(),this.currentArea._disposeEntities(),this._currentArea=new b(this,this.nextArea),this.nextArea=null,this.currentArea.state.onCreate(this.currentArea)),this.currentArea._tickTimers(),this.currentArea.state.onStep(),this.currentArea._createEntities(),this.currentArea._destroyEntities(),this.currentArea._tickEntityTimers(),this.currentArea._stepEntities(),this.currentArea._drawScene(this.renderer,this.overlayCanvas),this.input._clearKeyTick(),this.input._updateGamepad(),this.input._clearMouseTick(),!0===this.running&&requestAnimationFrame(this.tick.bind(this))}},{key:"resizeCanvas",value:function(){var t=null===this.screenSize?[this.canvas.clientWidth,this.canvas.clientHeight]:this.screenSize,e=(0,i.Z)(t,2),n=e[0],r=e[1];this.canvas.width===n&&this.canvas.height===r||(this.canvas.width=n,this.canvas.height=r,this.renderer.setSize(n,r,!1))}}]),t}()},3977:(t,e,n)=>{"use strict";n.d(e,{tF:()=>r,Iy:()=>a,nd:()=>o,Sy:()=>s,uZ:()=>u});var i=n(4888);function r(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random;return Math.floor(n()*(e-t+1)+t)}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random;return t=Math.ceil(t),e=Math.floor(e),Math.floor(n()*(e-t+1))+t}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random;return t[a(0,t.length-1,e)]}function s(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random,r=e?(0,i.Z)(t):t,a=r.length;a>0;){var o=Math.floor(n()*a),s=r[a-=1];r[a]=r[o],r[o]=s}return r}function u(t,e,n){return Math.min(Math.max(t,e),n)}},4725:(t,e,n)=>{"use strict";n.d(e,{sr:()=>a,tc:()=>u,$t:()=>g});var i,r,a,o,s,u,c=n(4888),l=n(7061),h=n(9900),f=n(240);function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}!function(t){t[t.Up=0]="Up",t[t.Down=1]="Down",t[t.Left=2]="Left",t[t.Right=3]="Right",t[t.Control=4]="Control",t[t.Alt=5]="Alt",t[t.Delete=6]="Delete",t[t.Backspace=7]="Backspace",t[t.CapsLock=8]="CapsLock",t[t.Enter=9]="Enter",t[t.Escape=10]="Escape",t[t.End=11]="End",t[t.Shift=12]="Shift",t[t.PageUp=13]="PageUp",t[t.PageDown=14]="PageDown",t[t.Pause=15]="Pause",t[t.Cancel=16]="Cancel",t[t.ScrollLock=17]="ScrollLock",t[t.A=18]="A",t[t.B=19]="B",t[t.C=20]="C",t[t.D=21]="D",t[t.E=22]="E",t[t.F=23]="F",t[t.G=24]="G",t[t.H=25]="H",t[t.I=26]="I",t[t.J=27]="J",t[t.K=28]="K",t[t.L=29]="L",t[t.M=30]="M",t[t.N=31]="N",t[t.O=32]="O",t[t.P=33]="P",t[t.Q=34]="Q",t[t.R=35]="R",t[t.S=36]="S",t[t.T=37]="T",t[t.U=38]="U",t[t.V=39]="V",t[t.W=40]="W",t[t.X=41]="X",t[t.Y=42]="Y",t[t.Z=43]="Z",t[t.F1=44]="F1",t[t.F2=45]="F2",t[t.F3=46]="F3",t[t.F4=47]="F4",t[t.F5=48]="F5",t[t.F6=49]="F6",t[t.F7=50]="F7",t[t.F8=51]="F8",t[t.F9=52]="F9",t[t.F10=53]="F10",t[t.F11=54]="F11",t[t.F12=55]="F12",t[t.Num1=56]="Num1",t[t.Num2=57]="Num2",t[t.Num3=58]="Num3",t[t.Num4=59]="Num4",t[t.Num5=60]="Num5",t[t.Num6=61]="Num6",t[t.Num7=62]="Num7",t[t.Num8=63]="Num8",t[t.Num9=64]="Num9",t[t.Num0=65]="Num0",t[t.Amperstand=66]="Amperstand",t[t.Asterisk=67]="Asterisk",t[t.At=68]="At",t[t.BackSlash=69]="BackSlash",t[t.BraceLeft=70]="BraceLeft",t[t.BraceRight=71]="BraceRight",t[t.Caret=72]="Caret",t[t.CloseBracket=73]="CloseBracket",t[t.Colon=74]="Colon",t[t.Comma=75]="Comma",t[t.Dollar=76]="Dollar",t[t.EqualSign=77]="EqualSign",t[t.ExclamationPoint=78]="ExclamationPoint",t[t.GreaterThan=79]="GreaterThan",t[t.LeftParen=80]="LeftParen",t[t.LessThan=81]="LessThan",t[t.Minus=82]="Minus",t[t.Hashtag=83]="Hashtag",t[t.OpenBracket=84]="OpenBracket",t[t.Period=85]="Period",t[t.QuestionMark=86]="QuestionMark",t[t.SingleQuote=87]="SingleQuote",t[t.DoubleQuote=88]="DoubleQuote",t[t.RightParen=89]="RightParen",t[t.Semicolon=90]="Semicolon",t[t.ForwardSlash=91]="ForwardSlash",t[t.Underscore=92]="Underscore",t[t.Space=93]="Space",t[t.Tick=94]="Tick",t[t.Tilda=95]="Tilda"}(a||(a={})),function(t){t[t.Up=12]="Up",t[t.Down=13]="Down",t[t.Left=14]="Left",t[t.Right=15]="Right",t[t.ACross=0]="ACross",t[t.BCircle=1]="BCircle",t[t.XSquare=2]="XSquare",t[t.YTriangle=3]="YTriangle",t[t.Select=8]="Select",t[t.Start=9]="Start",t[t.Center=16]="Center",t[t.LeftBumper=4]="LeftBumper",t[t.RightBumper=5]="RightBumper",t[t.LeftStickCenter=10]="LeftStickCenter",t[t.RightStickCenter=11]="RightStickCenter"}(o||(o={})),function(t){t[t.LeftStickX=0]="LeftStickX",t[t.LeftStickY=1]="LeftStickY",t[t.RightStickX=2]="RightStickX",t[t.RightStickY=3]="RightStickY",t[t.LeftTrigger=4]="LeftTrigger",t[t.RightTrigger=5]="RightTrigger"}(s||(s={})),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"}(u||(u={}));var v=(i={},(0,f.Z)(i,"ArrowUp",a.Up),(0,f.Z)(i,"ArrowDown",a.Down),(0,f.Z)(i,"ArrowLeft",a.Left),(0,f.Z)(i,"ArrowRight",a.Right),(0,f.Z)(i,"Control",a.Control),(0,f.Z)(i,"Alt",a.Alt),(0,f.Z)(i,"Delete",a.Delete),(0,f.Z)(i,"Backspace",a.Backspace),(0,f.Z)(i,"CapsLock",a.CapsLock),(0,f.Z)(i,"Enter",a.Enter),(0,f.Z)(i,"Escape",a.Escape),(0,f.Z)(i,"End",a.End),(0,f.Z)(i,"Shift",a.Shift),(0,f.Z)(i,"PageUp",a.PageUp),(0,f.Z)(i,"PageDown",a.PageDown),(0,f.Z)(i,"Pause",a.Pause),(0,f.Z)(i,"Cancel",a.Cancel),(0,f.Z)(i,"ScrollLock",a.ScrollLock),(0,f.Z)(i,"a",a.A),(0,f.Z)(i,"b",a.B),(0,f.Z)(i,"c",a.C),(0,f.Z)(i,"d",a.D),(0,f.Z)(i,"e",a.E),(0,f.Z)(i,"f",a.F),(0,f.Z)(i,"g",a.G),(0,f.Z)(i,"h",a.H),(0,f.Z)(i,"i",a.I),(0,f.Z)(i,"j",a.J),(0,f.Z)(i,"k",a.K),(0,f.Z)(i,"l",a.L),(0,f.Z)(i,"m",a.M),(0,f.Z)(i,"n",a.N),(0,f.Z)(i,"o",a.O),(0,f.Z)(i,"p",a.P),(0,f.Z)(i,"q",a.Q),(0,f.Z)(i,"r",a.R),(0,f.Z)(i,"s",a.S),(0,f.Z)(i,"t",a.T),(0,f.Z)(i,"u",a.U),(0,f.Z)(i,"v",a.V),(0,f.Z)(i,"w",a.W),(0,f.Z)(i,"x",a.X),(0,f.Z)(i,"y",a.Y),(0,f.Z)(i,"z",a.Z),(0,f.Z)(i,"A",a.A),(0,f.Z)(i,"B",a.B),(0,f.Z)(i,"C",a.C),(0,f.Z)(i,"D",a.D),(0,f.Z)(i,"E",a.E),(0,f.Z)(i,"F",a.F),(0,f.Z)(i,"G",a.G),(0,f.Z)(i,"H",a.H),(0,f.Z)(i,"I",a.I),(0,f.Z)(i,"J",a.J),(0,f.Z)(i,"K",a.K),(0,f.Z)(i,"L",a.L),(0,f.Z)(i,"M",a.M),(0,f.Z)(i,"N",a.N),(0,f.Z)(i,"O",a.O),(0,f.Z)(i,"P",a.P),(0,f.Z)(i,"Q",a.Q),(0,f.Z)(i,"R",a.R),(0,f.Z)(i,"S",a.S),(0,f.Z)(i,"T",a.T),(0,f.Z)(i,"U",a.U),(0,f.Z)(i,"V",a.V),(0,f.Z)(i,"W",a.W),(0,f.Z)(i,"X",a.X),(0,f.Z)(i,"Y",a.Y),(0,f.Z)(i,"Z",a.Z),(0,f.Z)(i,"F1",a.F1),(0,f.Z)(i,"F2",a.F2),(0,f.Z)(i,"F3",a.F3),(0,f.Z)(i,"F4",a.F4),(0,f.Z)(i,"F5",a.F5),(0,f.Z)(i,"F6",a.F6),(0,f.Z)(i,"F7",a.F7),(0,f.Z)(i,"F8",a.F8),(0,f.Z)(i,"F9",a.F9),(0,f.Z)(i,"F10",a.F10),(0,f.Z)(i,"F11",a.F11),(0,f.Z)(i,"F12",a.F12),(0,f.Z)(i,"1",a.Num1),(0,f.Z)(i,"2",a.Num2),(0,f.Z)(i,"3",a.Num3),(0,f.Z)(i,"4",a.Num4),(0,f.Z)(i,"5",a.Num5),(0,f.Z)(i,"6",a.Num6),(0,f.Z)(i,"7",a.Num7),(0,f.Z)(i,"8",a.Num8),(0,f.Z)(i,"9",a.Num9),(0,f.Z)(i,"0",a.Num0),(0,f.Z)(i,"&",a.Amperstand),(0,f.Z)(i,"*",a.Asterisk),(0,f.Z)(i,"@",a.At),(0,f.Z)(i,"\\",a.BackSlash),(0,f.Z)(i,"{",a.BraceLeft),(0,f.Z)(i,"}",a.BraceRight),(0,f.Z)(i,"^",a.Caret),(0,f.Z)(i,"]",a.CloseBracket),(0,f.Z)(i,":",a.Colon),(0,f.Z)(i,",",a.Comma),(0,f.Z)(i,"$",a.Dollar),(0,f.Z)(i,"=",a.EqualSign),(0,f.Z)(i,"!",a.ExclamationPoint),(0,f.Z)(i,">",a.GreaterThan),(0,f.Z)(i,"(",a.LeftParen),(0,f.Z)(i,"<",a.LessThan),(0,f.Z)(i,"-",a.Minus),(0,f.Z)(i,"#",a.Hashtag),(0,f.Z)(i,"[",a.OpenBracket),(0,f.Z)(i,".",a.Period),(0,f.Z)(i,"?",a.QuestionMark),(0,f.Z)(i,"'",a.SingleQuote),(0,f.Z)(i,'"',a.DoubleQuote),(0,f.Z)(i,")",a.RightParen),(0,f.Z)(i,";",a.Semicolon),(0,f.Z)(i,"/",a.ForwardSlash),(0,f.Z)(i,"_",a.Underscore),(0,f.Z)(i," ",a.Space),(0,f.Z)(i,"`",a.Tick),(0,f.Z)(i,"~",a.Tilda),i),y=(r={},(0,f.Z)(r,0,u.Left),(0,f.Z)(r,1,u.Middle),(0,f.Z)(r,2,u.Right),r),m=function(){function t(){(0,l.Z)(this,t),(0,f.Z)(this,"buttonsStart",void 0),(0,f.Z)(this,"buttonsDown",void 0),(0,f.Z)(this,"buttonsReleased",void 0),(0,f.Z)(this,"axes",void 0)}return(0,h.Z)(t,null,[{key:"fromGamepad",value:function(t){return{buttonsStart:new Set,buttonsDown:new Set,buttonsReleased:new Set,axes:[].concat((0,c.Z)(t.axes),[t.buttons[6].value,t.buttons[7].value])}}}]),t}(),g=function(){function t(e){(0,l.Z)(this,t),(0,f.Z)(this,"canvas",void 0),(0,f.Z)(this,"keysStart",new Set),(0,f.Z)(this,"keysDown",new Set),(0,f.Z)(this,"keysReleased",new Set),(0,f.Z)(this,"gamepadState",{}),(0,f.Z)(this,"mouseCoords",[0,0]),(0,f.Z)(this,"mouseMovement",[0,0]),(0,f.Z)(this,"mouseStart",new Set),(0,f.Z)(this,"mouseDown",new Set),(0,f.Z)(this,"mouseReleased",new Set),(0,f.Z)(this,"_pointerLockEnabled",!1),this.canvas=e,e.addEventListener("keydown",this.onKeyDown.bind(this)),e.addEventListener("keyup",this.onKeyRelease.bind(this)),window.addEventListener("gamepadconnected",this.onGamepadConnected.bind(this)),window.addEventListener("gamepaddisconnected",this.onGamepadDisconnected.bind(this)),e.addEventListener("mousemove",this.onMouseMove.bind(this)),e.addEventListener("mousedown",this.onMouseDown.bind(this)),e.addEventListener("mouseup",this.onMouseUp.bind(this)),e.addEventListener("click",this.onPointerLockClick.bind(this)),document.addEventListener("pointerlockchange",this.onPointerLockChange.bind(this)),document.addEventListener("pointerlockerror",this.onPointerLockError.bind(this))}return(0,h.Z)(t,[{key:"onKeyDown",value:function(t){var e=v[t.key];void 0!==e&&(this.keysDown.add(e),t.repeat||this.keysStart.add(e))}},{key:"onKeyRelease",value:function(t){var e=v[t.key];void 0!==e&&(this.keysDown.delete(e),this.keysReleased.add(e))}},{key:"_clearKeyTick",value:function(){this.keysStart.clear(),this.keysReleased.clear()}},{key:"isKeyStarted",value:function(t){return this.keysStart.has(t)}},{key:"isKeyDown",value:function(t){return this.keysDown.has(t)}},{key:"isKeyReleased",value:function(t){return this.keysReleased.has(t)}},{key:"onGamepadConnected",value:function(t){var e=t.gamepad;"standard"===e.mapping&&(this.gamepadState[e.index]=m.fromGamepad(e))}},{key:"onGamepadDisconnected",value:function(t){var e=t.gamepad;delete this.gamepadState[e.index]}},{key:"_updateGamepad",value:function(){if(void 0!==navigator.getGamepads){var t,e=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(navigator.getGamepads());try{for(e.s();!(t=e.n()).done;){var n=t.value;if(null!==n){var i=this.gamepadState[n.index]||m.fromGamepad(n),r=new Set,a=new Set,s=new Set;for(var u in o)if(!isNaN(Number(u))){var l=Number(u);n.buttons[l].pressed?(a.add(l),i.buttonsDown.has(l)||r.add(l)):i.buttonsDown.has(l)&&s.add(l)}var h=[].concat((0,c.Z)(n.axes),[n.buttons[6].value,n.buttons[7].value]);Object.assign(this.gamepadState[n.index],{buttonsStart:r,buttonsDown:a,buttonsReleased:s,axes:h})}}}catch(t){e.e(t)}finally{e.f()}}}},{key:"getConnectedGamepads",value:function(){return Object.keys(this.gamepadState).map(Number).filter((function(t){return!Number.isNaN(t)}))}},{key:"isGamepadConnected",value:function(t){return void 0!==this.gamepadState[t]}},{key:"isGamepadButtonStarted",value:function(t,e){var n=this.gamepadState[t];return void 0!==n&&n.buttonsStart.has(e)}},{key:"isGamepadButtonDown",value:function(t,e){var n=this.gamepadState[t];return void 0!==n&&n.buttonsDown.has(e)}},{key:"isGamepadButtonReleased",value:function(t,e){var n=this.gamepadState[t];return void 0!==n&&n.buttonsReleased.has(e)}},{key:"getGamepadAxis",value:function(t,e){var n=this.gamepadState[t];return void 0===n?0:n.axes[e]}},{key:"pointerLockEnabled",get:function(){return this._pointerLockEnabled},set:function(t){this._pointerLockEnabled=t,t||document.exitPointerLock()}},{key:"onMouseMove",value:function(t){this.mouseCoords=[t.clientX*this.canvas.width/this.canvas.clientWidth,t.clientY*this.canvas.height/this.canvas.clientHeight],document.pointerLockElement===this.canvas?this.mouseMovement=[t.movementX,t.movementY]:this.mouseMovement=[0,0]}},{key:"onMouseDown",value:function(t){var e=y[t.button];void 0!==e&&(this.mouseDown.add(e),this.mouseStart.add(e))}},{key:"onMouseUp",value:function(t){var e=y[t.button];void 0!==e&&(this.mouseDown.delete(e),this.mouseReleased.delete(e))}},{key:"onPointerLockClick",value:function(){this._pointerLockEnabled&&this.canvas.requestPointerLock()}},{key:"onPointerLockChange",value:function(t){document.pointerLockElement!==this.canvas&&(this.mouseMovement=[0,0])}},{key:"onPointerLockError",value:function(t){}},{key:"_clearMouseTick",value:function(){this.mouseStart.clear(),this.mouseReleased.clear(),this.mouseMovement=[0,0]}},{key:"isMouseButtonStarted",value:function(t){return this.mouseStart.has(t)}},{key:"isMouseButtonDown",value:function(t){return this.mouseDown.has(t)}},{key:"isMouseButtonReleased",value:function(t){return this.mouseReleased.has(t)}},{key:"getMouseX",value:function(){return this.mouseCoords[0]}},{key:"getMouseY",value:function(){return this.mouseCoords[1]}},{key:"getMouseMovementX",value:function(){return this.mouseMovement[0]}},{key:"getMouseMovementY",value:function(){return this.mouseMovement[1]}}]),t}()},6508:(t,e,n)=>{"use strict";n.d(e,{JM:()=>i,GI:()=>r,uj:()=>a,mM:()=>o,SW:()=>s,d2:()=>u,Ms:()=>c});var i=8,r=18,a=1,o=30,s=3,u=s*i,c=15},5839:(t,e,n)=>{"use strict";n.d(e,{W:()=>f});var i,r=n(7061),a=n(9900),o=n(240),s=n(4725),u=n(6508),c=n(6709),l=u.d2/40,h=(u.mM/2+u.Ms)/80;!function(t){t[t.ClearMovementDelay=0]="ClearMovementDelay",t[t.MoveLeft=1]="MoveLeft",t[t.MoveRight=2]="MoveRight",t[t.ZoomIn=3]="ZoomIn"}(i||(i={}));var f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(0,r.Z)(this,t),(0,o.Z)(this,"tags",["camera"]),(0,o.Z)(this,"entity",void 0),(0,o.Z)(this,"camera",void 0),(0,o.Z)(this,"relativePosition",void 0),(0,o.Z)(this,"movingTick",1),this.relativePosition=e}return(0,a.Z)(t,[{key:"onCreate",value:function(t){this.entity=t,this.camera=new c.PerspectiveCamera(50,this.entity.area.game.canvasWidth/this.entity.area.game.canvasHeight,.001,1e3),this.camera.position.set(u.Ms,4.8,-this.relativePosition*u.d2),this.camera.rotateY(Math.PI/2),this.entity.area.camera=this.camera,this.entity.object=this.camera,this.entity.setTimer(i.ClearMovementDelay,10,!1),this.doorSelector.movedTo(this.relativePosition)}},{key:"onDestroy",value:function(){}},{key:"onDispose",value:function(){}},{key:"onStep",value:function(){this.camera.aspect=this.entity.area.game.canvasWidth/this.entity.area.game.canvasHeight,this.camera.updateProjectionMatrix();var t=this.entity.area.game.input,e=this.doorSelector;this.isMoving||(t.isKeyStarted(s.sr.Left)&&this.relativePosition>e.smallestIndex?this.moveLeft():t.isKeyStarted(s.sr.Right)&&this.relativePosition<e.largestIndex?this.moveRight():t.isKeyStarted(s.sr.Up)&&e.canEnterDoor(this.relativePosition)&&this.zoomIn())}},{key:"doorSelector",get:function(){return this.entity.area.state}},{key:"isMoving",get:function(){return 0!==this.movingTick}},{key:"moveLeft",value:function(){this.movingTick=1,this.entity.setTimer(i.MoveLeft,1,!0)}},{key:"moveRight",value:function(){this.movingTick=1,this.entity.setTimer(i.MoveRight,1,!0)}},{key:"zoomIn",value:function(){this.movingTick=1,this.entity.setTimer(i.ZoomIn,1,!0)}},{key:"onTimer",value:function(t){switch(t){case i.ClearMovementDelay:return this.clearMovementDelay();case i.MoveLeft:return this.moveCameraLeftTick();case i.MoveRight:return this.moveCameraRightTick();case i.ZoomIn:return this.zoomInTick()}}},{key:"clearMovementDelay",value:function(){this.movingTick=0}},{key:"moveCameraLeftTick",value:function(){this.camera.position.z+=l,this.movingTick+=1,this.movingTick>40&&(this.relativePosition-=1,this.movingTick=0,this.entity.clearTimer(i.MoveLeft),this.doorSelector.movedTo(this.relativePosition))}},{key:"moveCameraRightTick",value:function(){this.camera.position.z-=l,this.movingTick+=1,this.movingTick>40&&(this.relativePosition+=1,this.movingTick=0,this.entity.clearTimer(i.MoveRight),this.doorSelector.movedTo(this.relativePosition))}},{key:"zoomInTick",value:function(){this.camera.position.x-=h,this.movingTick+=1,this.movingTick>80&&(this.movingTick=0,this.entity.clearTimer(i.ZoomIn),this.doorSelector.enterDoor(this.relativePosition))}},{key:"onDraw",value:function(t){}}]),t}()},5142:(t,e,n)=>{"use strict";n.a(t,(async t=>{n.d(e,{S:()=>h});var i=n(7061),r=n(9900),a=n(3517),o=n(8352),s=n(886),u=n(778),c=n(5976),l=t([u]);u=(l.then?await l:l)[0];var h=function(t){(0,a.Z)(l,t);var e,n,c=(e=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,i=(0,s.Z)(e);if(n){var r=(0,s.Z)(this).constructor;t=Reflect.construct(i,arguments,r)}else t=i.apply(this,arguments);return(0,o.Z)(this,t)});function l(){return(0,i.Z)(this,l),c.call(this,10,.05,150)}return(0,r.Z)(l,[{key:"onTick",value:function(t){this.entity.area.state.ambient.volume=1-t}},{key:"onFinish",value:function(){this.entity.area.state.ambient.stop(),this.entity.area.game.setArea(new u.x)}}]),l}(c.c)}))},1930:(t,e,n)=>{"use strict";n.d(e,{a:()=>s});var i=n(7061),r=n(9900),a=n(240),o=n(3977),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;(0,i.Z)(this,t),(0,a.Z)(this,"tags",[]),(0,a.Z)(this,"entity",void 0),(0,a.Z)(this,"ticks",void 0),(0,a.Z)(this,"fade",void 0),(0,a.Z)(this,"alpha",1),this.ticks=Math.abs(e),this.fade=Math.abs(n)}return(0,r.Z)(t,[{key:"onCreate",value:function(t){this.entity=t,this.entity.setTimer(1,this.ticks,!0)}},{key:"onDestroy",value:function(){}},{key:"onDispose",value:function(){}},{key:"onStep",value:function(){}},{key:"onTimer",value:function(t){1===t&&(this.onTick(this.alpha),this.fadeIn())}},{key:"onTick",value:function(t){}},{key:"fadeIn",value:function(){this.alpha=(0,o.uZ)(this.alpha-this.fade,0,1),this.alpha<=0&&(this.entity.clearTimer(1),this.onFinish())}},{key:"onFinish",value:function(){}},{key:"onDraw",value:function(t){t.globalAlpha=this.alpha,t.fillStyle="black",t.fillRect(0,0,this.entity.area.overlayWidth,this.entity.area.overlayHeight),t.globalAlpha=1}}]),t}()},5976:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var i=n(7061),r=n(9900),a=n(240),o=n(3977),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(0,i.Z)(this,t),(0,a.Z)(this,"tags",[]),(0,a.Z)(this,"entity",void 0),(0,a.Z)(this,"ticks",void 0),(0,a.Z)(this,"fade",void 0),(0,a.Z)(this,"delay",void 0),(0,a.Z)(this,"alpha",0),this.ticks=Math.abs(e),this.fade=Math.abs(n),this.delay=Math.max(r,1)}return(0,r.Z)(t,[{key:"onCreate",value:function(t){this.entity=t,this.entity.setTimer(1,this.ticks+this.delay,!1)}},{key:"onDestroy",value:function(){}},{key:"onDispose",value:function(){}},{key:"onStep",value:function(){}},{key:"onTimer",value:function(t){1===t&&(this.entity.setTimer(1,this.ticks,!0),this.onTick(this.alpha),this.fadeOut())}},{key:"onTick",value:function(t){}},{key:"fadeOut",value:function(){this.alpha=(0,o.uZ)(this.alpha+this.fade,0,1),this.alpha>=1&&(this.entity.clearTimer(1),this.onFinish())}},{key:"onFinish",value:function(){}},{key:"onDraw",value:function(t){t.globalAlpha=this.alpha,t.fillStyle="black",t.fillRect(0,0,this.entity.area.overlayWidth,this.entity.area.overlayHeight),t.globalAlpha=1}}]),t}()},2730:(t,e,n)=>{"use strict";n.a(t,(async t=>{n.d(e,{O:()=>f});var i,r=n(7061),a=n(9900),o=n(240),s=n(778),u=n(3977),c=t([s]);function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}s=(c.then?await c:c)[0],function(t){t[t.TickTorch=0]="TickTorch",t[t.RestartGame=1]="RestartGame"}(i||(i={}));var f=function(){function t(){(0,r.Z)(this,t),(0,o.Z)(this,"tags",[]),(0,o.Z)(this,"entity",void 0),(0,o.Z)(this,"currentTick",5400)}return(0,a.Z)(t,[{key:"onCreate",value:function(t){this.entity=t,this.entity.setTimer(i.TickTorch,1,!0)}},{key:"enteredDoor",value:function(){this.currentTick+=150}},{key:"onDestroy",value:function(){}},{key:"onDispose",value:function(){}},{key:"onStep",value:function(){}},{key:"onTimer",value:function(t){switch(t){case i.TickTorch:return this.tickTorch();case i.RestartGame:return this.restartGame()}}},{key:"tickTorch",value:function(){var t,e=(0,u.uZ)(this.currentTick/5400,0,1),n=l(this.entity.area.findEntities("torch-entity"));try{for(n.s();!(t=n.n()).done;)t.value.state.setTorchIntensity(e)}catch(t){n.e(t)}finally{n.f()}if(!this.entity.area.state.camera.isMoving&&(this.currentTick-=1,console.log(this.currentTick),this.currentTick<=0)){this.entity.clearTimer(i.TickTorch);var r,a=l(this.entity.area.findEntities("camera"));try{for(a.s();!(r=a.n()).done;)r.value.destroy()}catch(t){a.e(t)}finally{a.f()}this.entity.setTimer(i.RestartGame,150,!1)}}},{key:"restartGame",value:function(){this.entity.area.state.ambient.stop(),this.entity.area.game.setArea(new s.x)}},{key:"onDraw",value:function(t){}}]),t}()}))},3701:(t,e,n)=>{"use strict";n.d(e,{S:()=>x});var i=n(6104),r=n(7061),a=n(9900),o=n(240),s=n(6508),u=n(6709);function c(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var h=8.5,f=6.5,d=(s.SW*s.JM-f)/2,v=new u.PlaneGeometry,y=new u.MeshStandardMaterial,m=new u.MeshStandardMaterial,g=new u.MeshStandardMaterial,p=new u.MeshStandardMaterial,b=new u.MeshStandardMaterial,k=new u.MeshStandardMaterial,A=new u.MeshStandardMaterial,w=new u.MeshStandardMaterial,Z=new u.MeshStandardMaterial,M=new u.MeshStandardMaterial({color:7360548}),x=function(){function t(e){(0,r.Z)(this,t),(0,o.Z)(this,"tags",["layout-entity","torch-entity"]),(0,o.Z)(this,"entity",void 0),(0,o.Z)(this,"entries",void 0),(0,o.Z)(this,"leftSideWall",void 0),(0,o.Z)(this,"rightSideWall",void 0),(0,o.Z)(this,"topWall",void 0),(0,o.Z)(this,"leftMiniCube",void 0),(0,o.Z)(this,"rightMiniCube",void 0),(0,o.Z)(this,"arch",void 0),(0,o.Z)(this,"leftInsideWall",void 0),(0,o.Z)(this,"rightInsideWall",void 0),(0,o.Z)(this,"topInsideWall",void 0),(0,o.Z)(this,"torch",void 0),(0,o.Z)(this,"textGeometry",void 0),(0,o.Z)(this,"torchLights",void 0),this.entries=e,this.torchLights=new Map(e.map((function(t){return[t.relativePosition,[]]})))}return(0,a.Z)(t,[{key:"onCreate",value:function(e){this.entity=e,this.entity.object=new u.Group,t.buildMaterial(y,"Brick",this.buildLeftSideTexture.bind(this)),t.buildMaterial(m,"Brick",this.buildRightSideTexture.bind(this)),t.buildMaterial(g,"Brick",this.buildTopTexture.bind(this)),t.buildMaterial(p,"Brick",this.buildLeftMiniTexture.bind(this)),t.buildMaterial(b,"Brick",this.buildRightMiniTexture.bind(this)),t.buildMaterial(k,"ArchBrick",this.buildArchTexture.bind(this)),t.buildMaterial(A,"Brick",this.buildInsideSideTexture.bind(this)),t.buildMaterial(w,"Brick",this.buildInsideTopTexture.bind(this)),this.leftSideWall=new u.InstancedMesh(v,y,this.entries.length),this.rightSideWall=new u.InstancedMesh(v,m,this.entries.length),this.topWall=new u.InstancedMesh(v,g,this.entries.length),this.leftMiniCube=new u.InstancedMesh(v,p,this.entries.length),this.rightMiniCube=new u.InstancedMesh(v,b,this.entries.length);var n=this.entity.area.game.assets.getObject("Arch");this.arch=new u.InstancedMesh(n.geometry,k,this.entries.length),this.leftInsideWall=new u.InstancedMesh(v,A,this.entries.length),this.rightInsideWall=new u.InstancedMesh(v,A,this.entries.length),this.topInsideWall=new u.InstancedMesh(v,w,this.entries.length);var r=this.entity.area.game.assets.getObject("WallTorch");Z.copy(r.material),this.torch=new u.InstancedMesh(r.geometry,Z,2*this.entries.length),this.entity.object.add(this.leftSideWall,this.rightSideWall,this.topWall,this.leftMiniCube,this.rightMiniCube,this.arch,this.leftInsideWall,this.rightInsideWall,this.topInsideWall,this.torch);var a=this.entity.area.game.assets.getFont("Number");this.textGeometry=this.entries.map((function(t){var e=t.text,n=void 0===e?"":e;return new u.TextGeometry(n,{font:a,size:.8,height:1,curveSegments:1})}));var o,l=c(this.entries.entries());try{for(l.s();!(o=l.n()).done;){var x=(0,i.Z)(o.value,2),C=x[0],S=x[1].relativePosition,T=(new u.Matrix4).makeScale(1,s.GI,d).multiply((new u.Matrix4).makeRotationY(Math.PI/2)).setPosition(0,s.GI/2,d/2+3.25+-S*s.d2);this.leftSideWall.setMatrixAt(C,T);var E=(new u.Matrix4).makeScale(1,s.GI,d).multiply((new u.Matrix4).makeRotationY(Math.PI/2)).setPosition(0,s.GI/2,-d/2-3.25+-S*s.d2);this.rightSideWall.setMatrixAt(C,E);var _=(new u.Matrix4).makeScale(1,s.GI-h,f).multiply((new u.Matrix4).makeRotationY(Math.PI/2)).setPosition(0,h+(s.GI-h)/2,-S*s.d2);this.topWall.setMatrixAt(C,_);var P=(new u.Matrix4).makeScale(1,1,1).multiply((new u.Matrix4).makeRotationY(Math.PI/2)).setPosition(0,8,2.75+-S*s.d2);this.leftMiniCube.setMatrixAt(C,P);var I=(new u.Matrix4).makeScale(1,1,1).multiply((new u.Matrix4).makeRotationY(Math.PI/2)).setPosition(0,8,-S*s.d2-2.75);this.rightMiniCube.setMatrixAt(C,I);var L=(new u.Matrix4).makeScale(2*s.uj,.5,.5).setPosition(0,-.2,-S*s.d2);this.arch.setMatrixAt(C,L);var B=(new u.Matrix4).makeScale(s.mM-s.uj,h,1).multiply((new u.Matrix4).makeRotationY(Math.PI)).setPosition(-s.uj/2-(s.mM-s.uj)/2,4.25,3.25+-S*s.d2);this.leftInsideWall.setMatrixAt(C,B);var D=(new u.Matrix4).makeScale(s.mM-s.uj,h,1).setPosition(-s.uj/2-(s.mM-s.uj)/2,4.25,-S*s.d2-3.25);this.rightInsideWall.setMatrixAt(C,D);var j=(new u.Matrix4).makeScale(s.mM-s.uj,1,f).multiply((new u.Matrix4).makeRotationX(Math.PI/2)).setPosition(-s.uj/2-(s.mM-s.uj)/2,h,-S*s.d2);this.topInsideWall.setMatrixAt(C,j);var R=(new u.Matrix4).makeScale(.5,1,.5).setPosition(s.uj,4.4,3.175+-S*s.d2);this.torch.setMatrixAt(2*C,R);var F=(new u.Matrix4).makeScale(.5,1,.5).setPosition(s.uj,4.4,-S*s.d2-3.175);this.torch.setMatrixAt(2*C+1,F);var N=new u.PointLight(16765008,1,13,1);N.position.set(s.uj+.3,5.3,3.175+-S*s.d2),this.entity.object.add(N);var O=N.clone();O.position.set(s.uj+.3,5.3,-S*s.d2-3.175),this.entity.object.add(O),this.torchLights.get(S).push(N,O);var G=this.textGeometry[C];G.computeBoundingBox();var W=G.boundingBox,U=W.max.x-W.min.x,J=W.max.y-W.min.y,Y=new u.Mesh(G,M);Y.rotation.set(0,Math.PI/2,0),Y.position.set(-.8,h+2*J,U/2+-S*s.d2),this.entity.object.add(Y)}}catch(t){l.e(t)}finally{l.f()}this.leftSideWall.instanceMatrix.needsUpdate=!0,this.rightSideWall.instanceMatrix.needsUpdate=!0,this.topWall.instanceMatrix.needsUpdate=!0,this.leftMiniCube.instanceMatrix.needsUpdate=!0,this.rightMiniCube.instanceMatrix.needsUpdate=!0,this.arch.instanceMatrix.needsUpdate=!0,this.leftInsideWall.instanceMatrix.needsUpdate=!0,this.rightInsideWall.instanceMatrix.needsUpdate=!0,this.topInsideWall.instanceMatrix.needsUpdate=!0,this.torch.instanceMatrix.needsUpdate=!0}},{key:"buildLeftSideTexture",value:function(t){return this.dynamicallyBuildTexture(t,"LeftSide",{repeatX:d/s.JM,repeatY:s.GI/s.JM,offsetX:0,offsetY:s.GI/s.JM%1})}},{key:"buildRightSideTexture",value:function(t){return this.dynamicallyBuildTexture(t,"RightSide",{repeatX:d/s.JM,repeatY:s.GI/s.JM,offsetX:(d+f)/s.JM%1,offsetY:s.GI/s.JM%1})}},{key:"buildTopTexture",value:function(t){return this.dynamicallyBuildTexture(t,"Top",{repeatX:f/s.JM,repeatY:(s.GI-h)/s.JM,offsetX:d/s.JM%1,offsetY:h/s.JM%1+s.GI/s.JM%1})}},{key:"buildLeftMiniTexture",value:function(t){return this.dynamicallyBuildTexture(t,"LeftMini",{repeatX:1/s.JM,repeatY:1/s.JM,offsetX:d/s.JM%1,offsetY:1/s.JM%1+h/s.JM%1})}},{key:"buildRightMiniTexture",value:function(t){return this.dynamicallyBuildTexture(t,"RightMini",{repeatX:1/s.JM,repeatY:1/s.JM,offsetX:(d+f-1)/s.JM%1,offsetY:1/s.JM%1+h/s.JM%1})}},{key:"buildArchTexture",value:function(t){return this.dynamicallyBuildTexture(t,"Arch",{repeatX:3/4,repeatY:3/4})}},{key:"buildInsideSideTexture",value:function(t){return this.dynamicallyBuildTexture(t,"InsideSide",{repeatX:(s.mM-s.uj)/s.JM,repeatY:h/s.JM})}},{key:"buildInsideTopTexture",value:function(t){return this.dynamicallyBuildTexture(t,"InsideTop",{repeatX:(s.mM-s.uj)/s.JM,repeatY:f/s.JM})}},{key:"dynamicallyBuildTexture",value:function(t,e,n){var i=n.repeatX,r=n.repeatY,a=n.offsetX,o=void 0===a?0:a,s=n.offsetY,c=void 0===s?0:s,l=this.entity.area.game.assets,h="".concat(t,"-").concat(e);if(l.hasTexture(h))return l.getTexture(h);var f=l.getImage(t),d=new u.Texture(f);return d.needsUpdate=!0,d.wrapS=u.RepeatWrapping,d.wrapT=u.RepeatWrapping,d.repeat.set(i,r),d.offset.set(o,c),l.saveTexture(h,d),d}},{key:"dispose",value:function(){this.entity.destroy()}},{key:"setTorchPosition",value:function(t){var e,n,i;this.torchLights.forEach((function(t){return t.forEach((function(t){return t.visible=!1}))}));var r=null!==(e=this.torchLights.get(t))&&void 0!==e?e:[],a=null!==(n=this.torchLights.get(t-1))&&void 0!==n?n:[],o=null!==(i=this.torchLights.get(t+1))&&void 0!==i?i:[];r.forEach((function(t){return t.visible=!0})),a.forEach((function(t){return t.visible=!0})),o.forEach((function(t){return t.visible=!0}))}},{key:"setTorchIntensity",value:function(t){this.torchLights.forEach((function(e){return e.forEach((function(e){return e.intensity=t}))}))}},{key:"onDestroy",value:function(){}},{key:"onDispose",value:function(){this.leftSideWall.dispose(),this.rightSideWall.dispose(),this.topWall.dispose(),this.leftMiniCube.dispose(),this.rightMiniCube.dispose(),this.arch.dispose(),this.leftInsideWall.dispose(),this.rightInsideWall.dispose(),this.topInsideWall.dispose(),this.torch.dispose();var t,e=c(this.textGeometry);try{for(e.s();!(t=e.n()).done;)t.value.dispose()}catch(t){e.e(t)}finally{e.f()}}},{key:"onStep",value:function(){}},{key:"onTimer",value:function(t){}},{key:"onDraw",value:function(t){}}],[{key:"buildMaterial",value:function(t,e,n){t.map=n("".concat(e,"Color")),t.normalMap=n("".concat(e,"Normal")),t.aoMap=n("".concat(e,"Occlusion"))}}]),t}()},6693:(t,e,n)=>{"use strict";n.d(e,{L:()=>d});var i=n(6104),r=n(7061),a=n(9900),o=n(240),s=n(6508),u=n(6709);function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var l=new u.PlaneGeometry,h=new u.MeshStandardMaterial,f=new u.MeshStandardMaterial,d=function(){function t(e){(0,r.Z)(this,t),(0,o.Z)(this,"tags",["layout-entity","torch-entity"]),(0,o.Z)(this,"entity",void 0),(0,o.Z)(this,"entries",void 0),(0,o.Z)(this,"wall",void 0),(0,o.Z)(this,"torch",void 0),(0,o.Z)(this,"torchLights",void 0),this.entries=e,this.torchLights=new Map(e.map((function(t){return[t.relativePosition,[]]})))}return(0,a.Z)(t,[{key:"onCreate",value:function(t){this.entity=t,this.entity.object=new u.Group,h.map=this.buildWallTexture("BrickColor"),h.normalMap=this.buildWallTexture("BrickNormal"),h.aoMap=this.buildWallTexture("BrickOcclusion"),this.wall=new u.InstancedMesh(l,h,this.entries.length);var e=this.entity.area.game.assets.getObject("WallTorch");f.copy(e.material),this.torch=new u.InstancedMesh(e.geometry,f,this.entries.length),this.entity.object.add(this.wall,this.torch);var n,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(this.entries.entries());try{for(r.s();!(n=r.n()).done;){var a=(0,i.Z)(n.value,2),o=a[0],d=a[1].relativePosition,v=(new u.Matrix4).makeScale(1,s.GI,s.d2).multiply((new u.Matrix4).makeRotationY(Math.PI/2)).setPosition(0,s.GI/2,-d*s.d2);this.wall.setMatrixAt(o,v);var y=(new u.Matrix4).makeScale(.5,1,.5).setPosition(0,4.4,-d*s.d2);this.torch.setMatrixAt(o,y);var m=new u.PointLight(16765008,1,10,1);m.position.set(s.uj+.3,5.3,-d*s.d2),this.entity.object.add(m),this.torchLights.get(d).push(m)}}catch(t){r.e(t)}finally{r.f()}this.wall.instanceMatrix.needsUpdate=!0,this.torch.instanceMatrix.needsUpdate=!0}},{key:"buildWallTexture",value:function(t){var e=this.entity.area.game.assets,n="".concat(t,"-BlankWall");if(e.hasTexture(n))return e.getTexture(n);var i=e.getImage(t),r=new u.Texture(i);return r.needsUpdate=!0,r.wrapS=u.RepeatWrapping,r.wrapT=u.RepeatWrapping,r.repeat.set(s.d2/s.JM,s.GI/s.JM),e.saveTexture(n,r),r}},{key:"dispose",value:function(){this.entity.destroy()}},{key:"setTorchPosition",value:function(t){var e,n,i;this.torchLights.forEach((function(t){return t.forEach((function(t){return t.visible=!1}))}));var r=null!==(e=this.torchLights.get(t))&&void 0!==e?e:[],a=null!==(n=this.torchLights.get(t-1))&&void 0!==n?n:[],o=null!==(i=this.torchLights.get(t+1))&&void 0!==i?i:[];r.forEach((function(t){return t.visible=!0})),a.forEach((function(t){return t.visible=!0})),o.forEach((function(t){return t.visible=!0}))}},{key:"setTorchIntensity",value:function(t){this.torchLights.forEach((function(e){return e.forEach((function(e){return e.intensity=t}))}))}},{key:"onDestroy",value:function(){}},{key:"onDispose",value:function(){this.wall.dispose(),this.torch.dispose()}},{key:"onStep",value:function(){}},{key:"onTimer",value:function(t){}},{key:"onDraw",value:function(t){}}]),t}()},4799:(t,e,n)=>{"use strict";n.d(e,{F:()=>r,m:()=>x});var i,r,a=n(6104),o=n(7209),s=n(7061),u=n(9900),c=n(240),l=n(3977),h=n(6508),f=n(9980),d=n.n(f),v=n(2474),y=n(6709);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}!function(t){t.Underground="Underground",t.AAnotherTag="A Another Tag",t.AAttackGraffiti="A Attack Graffiti",t.ADrippingMarker="A Dripping Marker",t.BarrioRifa="Barrio Rifa",t.Bopollux="Bopollux",t.DJGross="DJ Gross",t.Elevenoone="Elevenoone",t.GangBangCrime="Gang Bang Crime",t.Graffonti="Graffonti",t.ILostItInTheStreets="I Lost It In The Street",t.Insane="Insane",t.MuroSP="Muro SP",t.NeoBopollux="Neo Bopollux",t.PixelRetroSP="Pixel Retro SP",t.RealBreakerz="Real Breakerz",t.Reskagraf="Reskagraf",t.StreetStyle="Street Style"}(r||(r={}));var g=["Help!!!","I'm lost","Numbers...\nNothing but\nNumbers...","There is\nno end","No way out","Some primes are\ndead ends","By the time anyone reads\nthis, I'm probably dead.","127 is DEATH!","How is this\npossible?","What is the\npattern?","Composite\nIs\nDEATH","Comprosoft\nwas here","The Prime Number Maze\nWilliam Paulsen","Infinity!","Hamming = 1","I am going\ninsane","Trapped!","<Prime>"],p=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],b=.05,k=(i={},(0,c.Z)(i,r.Underground,{lowercaseOnly:!0,noNumbers:!0,outline:b}),(0,c.Z)(i,r.AAnotherTag,{outline:b}),(0,c.Z)(i,r.AAttackGraffiti,{outline:b}),(0,c.Z)(i,r.ADrippingMarker,{outline:b}),(0,c.Z)(i,r.BarrioRifa,{noPunctuation:!0}),(0,c.Z)(i,r.Bopollux,{noNumbers:!0,noPunctuation:!0,outline:b}),(0,c.Z)(i,r.DJGross,{noNewline:!0}),(0,c.Z)(i,r.Elevenoone,{}),(0,c.Z)(i,r.GangBangCrime,{outline:b}),(0,c.Z)(i,r.Graffonti,{noPunctuation:!0}),(0,c.Z)(i,r.ILostItInTheStreets,{noNewline:!0}),(0,c.Z)(i,r.Insane,{lowercaseOnly:!0,noNumbers:!0,noPunctuation:!0}),(0,c.Z)(i,r.MuroSP,{noNewline:!0}),(0,c.Z)(i,r.NeoBopollux,{noNumbers:!0,noPunctuation:!0,outline:b}),(0,c.Z)(i,r.PixelRetroSP,{noPunctuation:!0,noNewline:!0}),(0,c.Z)(i,r.RealBreakerz,{noNewline:!0}),(0,c.Z)(i,r.Reskagraf,{noPunctuation:!0,outline:b}),(0,c.Z)(i,r.StreetStyle,{}),i),A=[{color:"red",outlineColors:["black","#550000"]},{color:"#BDB76B",outlineColors:["black"]},{color:"#556B2F",outlineColors:["black"]},{color:"blue",outlineColors:["black"]},{color:"#8A2BE2",outlineColors:[]},{color:"black",outlineColors:[]}],w=new y.PlaneGeometry,Z=-Math.PI/6,M=Math.PI/6,x=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Z)(this,t),(0,c.Z)(this,"tags",["layout-entity"]),(0,c.Z)(this,"entity",void 0),(0,c.Z)(this,"relativePosition",void 0),(0,c.Z)(this,"graffitiProps",void 0),(0,c.Z)(this,"width",void 0),(0,c.Z)(this,"angle",void 0),(0,c.Z)(this,"textTexture",void 0),(0,c.Z)(this,"normalTexture",void 0),(0,c.Z)(this,"normalCanvas",void 0),(0,c.Z)(this,"graffitiMaterial",void 0),this.relativePosition=e,this.graffitiProps=n}return(0,u.Z)(t,[{key:"onCreate",value:function(t){var e=this;this.entity=t,this.generateValues(),this.textTexture.loadFontFace().then((function(){e.textTexture.redraw(),e.refreshGraffiti()})),this.normalCanvas=document.createElement("canvas"),this.normalTexture=new y.Texture(this.normalCanvas),this.graffitiMaterial=new y.MeshStandardMaterial({map:this.textTexture,normalMap:this.normalTexture}),this.graffitiMaterial.transparent=!0;var n=new y.Mesh(w,this.graffitiMaterial);n.position.set(0,6.5,-this.relativePosition*h.d2),n.rotation.set(0,Math.PI/2,0),this.entity.object=n}},{key:"generateValues",value:function(){var e,n,i,r,a=null!==(e=this.graffitiProps.seed)&&void 0!==e?e:Math.random().toString(),s=v(a),u=null!==(n=this.graffitiProps.text)&&void 0!==n?n:(0,l.nd)(g,s);switch("<Prime>"===u&&(u=(0,l.nd)(p,s).toString()),(0,o.Z)(this.graffitiProps.font)){case"undefined":this.textTexture=t.generateTextTexture(u,s);break;case"string":this.textTexture=t.generateTextTexture(u,s,this.graffitiProps.font);break;default:this.textTexture=new(d())(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){(0,c.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({text:u},this.graffitiProps.font))}this.width=null!==(i=this.graffitiProps.width)&&void 0!==i?i:8,this.angle=null!==(r=this.graffitiProps.angle)&&void 0!==r?r:(0,l.tF)(Z,M,s)}},{key:"refreshGraffiti",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=t*(this.textTexture.height/this.textTexture.width);this.entity.object.scale.set(t,e,1),this.entity.object.rotation.x=this.angle,this.refreshGraffitiNormalsTexture(t,e)}},{key:"refreshGraffitiNormalsTexture",value:function(t,e){var n=this.entity.area.game.assets.getImage("BrickNormal");this.normalCanvas.width=2*n.width,this.normalCanvas.height=2*n.height;var i=(h.d2/2-t/2)/h.JM%1,r=(6.5+e/2)/h.JM%1,a=this.normalCanvas.getContext("2d");a.imageSmoothingEnabled=!1,a.translate(this.normalCanvas.width/2,this.normalCanvas.height/2),a.scale(2*h.JM/t,2*h.JM/e),a.rotate(this.angle),a.translate(-this.normalCanvas.width*t/(2*h.JM*2),-this.normalCanvas.height*e/(2*h.JM*2)),a.translate(-i*n.width,r*n.height);for(var o=-2;o<=Math.ceil(t);o+=1)for(var s=-2;s<=Math.ceil(e);s+=1)a.drawImage(n,o*n.width,s*n.height);this.normalTexture.needsUpdate=!0}},{key:"dispose",value:function(){this.entity.destroy()}},{key:"onDestroy",value:function(){}},{key:"onDispose",value:function(){this.graffitiMaterial.dispose(),this.textTexture.dispose(),this.normalTexture.dispose()}},{key:"onStep",value:function(){}},{key:"onTimer",value:function(t){}},{key:"onDraw",value:function(t){}}],[{key:"generateTextTexture",value:function(t,e,n){var i=/[0-9]/.test(t),r=/[!-/:-@[-`{-~}]/.test(t),o=function(t){return/\n/.test(t)}(t),s=Object.entries(k).filter((function(t){var e=(0,a.Z)(t,2),n=(e[0],e[1]),s=n.noNumbers,u=n.noPunctuation,c=n.noNewline;return!(s&&i||u&&r||c&&o)})).map((function(t){var e=(0,a.Z)(t,2),n=e[0];return e[1],n})),u=null!=n?n:(0,l.nd)(s,e),c=k[u];c.lowercaseOnly&&(t=t.toLowerCase());var h=(0,l.nd)(A,e),f=h.outlineColors.length>0?(0,l.nd)(h.outlineColors):null,v=0;return c.outline&&null!==f&&e()<.5&&(v=c.outline),new(d())({text:t,fontFamily:u,fontSize:96,alignment:"center",color:h.color,strokeWidth:v,strokeColor:f})}}]),t}()},9616:(t,e,n)=>{"use strict";n.d(e,{y:()=>l});var i=n(7061),r=n(9900),a=n(240),o=n(6508),s=n(6709),u=new s.PlaneGeometry,c=new s.MeshStandardMaterial,l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(0,i.Z)(this,t),(0,a.Z)(this,"tags",["layout-entity"]),(0,a.Z)(this,"entity",void 0),(0,a.Z)(this,"width",void 0),this.width=2*e*o.d2+o.d2}return(0,r.Z)(t,[{key:"onCreate",value:function(t){this.entity=t,c.map=this.buildTexture("DirtColor"),c.normalMap=this.buildTexture("DirtNormal"),c.aoMap=this.buildTexture("DirtOcclusion"),this.entity.object=new s.Mesh(u,c),this.entity.object.position.y=.01,this.entity.object.rotation.x=3*Math.PI/2,this.entity.object.scale.set(2*o.mM,this.width,1)}},{key:"buildTexture",value:function(t){var e=this.entity.area.game.assets.getTexture(t);return e.wrapS=s.RepeatWrapping,e.wrapT=s.RepeatWrapping,e.repeat.set(2*o.mM/6,this.width/6),e.offset.set(.5,.5),e}},{key:"onDestroy",value:function(){}},{key:"onDispose",value:function(){}},{key:"onStep",value:function(){}},{key:"onTimer",value:function(t){}},{key:"onDraw",value:function(t){}}]),t}()},8927:(t,e,n)=>{"use strict";n.d(e,{M:()=>i,d:()=>d});var i,r=n(7061),a=n(9900),o=n(240),s=n(6508),u=n(6709),c=(s.SW-1)/2*s.JM,l=1.25*s.JM,h=new u.BoxGeometry(1,1,1),f=new u.MeshStandardMaterial;!function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"}(i||(i={}));var d=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,r.Z)(this,t),(0,o.Z)(this,"tags",["layout-entity"]),(0,o.Z)(this,"entity",void 0),(0,o.Z)(this,"side",void 0),(0,o.Z)(this,"relativePosition",void 0),this.side=e,this.relativePosition=n}return(0,a.Z)(t,[{key:"onCreate",value:function(t){this.entity=t,f.map=this.buildTexture("BrickColor"),f.normalMap=this.buildTexture("BrickNormal"),f.aoMap=this.buildTexture("BrickOcclusion");var e=new u.Mesh(h,f);e.scale.set(2*s.Ms,s.GI,c),e.position.set(s.Ms/2+c/2,s.GI/2,this.computeSideOffset()+-this.relativePosition*s.d2),this.entity.object=e}},{key:"buildTexture",value:function(t){var e=this.entity.area.game.assets,n="".concat(t,"-Side");if(e.hasTexture(n))return e.getTexture(n);var i=e.getImage(t),r=new u.Texture(i);return r.needsUpdate=!0,r.wrapS=u.RepeatWrapping,r.wrapT=u.RepeatWrapping,r.repeat.set(2*s.Ms/s.JM,s.GI/s.JM),e.saveTexture(n,r),r}},{key:"computeSideOffset",value:function(){switch(this.side){case i.Left:return+l/2+c/2;case i.Right:return-l/2-c/2}}},{key:"onDestroy",value:function(){}},{key:"onDispose",value:function(){}},{key:"onStep",value:function(){}},{key:"onTimer",value:function(t){}},{key:"onDraw",value:function(t){}}]),t}()},8809:(t,e,n)=>{"use strict";n.a(t,(async t=>{var e=n(3755),i=n(107),r=n.n(i),a=n(6398),o=n(9780),s=n(778),u=(n(4089),n(2486)),c=n(8704),l=n(4072),h=n(5044),f=n(817),d=n(8880),v=n(2038),y=n(9460),m=n(3902),g=n(1875),p=n(8224),b=n(972),k=n(729),A=(n(8372),t([s]));s=(A.then?await A:A)[0];var w=document.createElement("canvas");document.body.appendChild(w);var Z=document.createElement("canvas");Z.setAttribute("tabindex","0"),Z.classList.add("overlay"),document.body.appendChild(Z);var M=new a.l(w,Z);Z.width=Z.clientWidth,Z.height=Z.clientHeight;var x=Z.getContext("2d");x.font='12pt "Special Elite"',x.fillStyle="white",x.textAlign="center",x.textBaseline="middle",x.fillText("Loading game...",Z.width/2,Z.height/2);var C=!1;function S(){return(S=(0,e.Z)(r().mark((function t(e){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.assets.loadImage("BrickColor",u),e.assets.loadImage("BrickNormal",c),e.assets.loadImage("BrickOcclusion",l),e.assets.loadImage("ArchBrickColor",h),e.assets.loadImage("ArchBrickNormal",f),e.assets.loadImage("ArchBrickOcclusion",d),e.assets.loadTexture("DirtColor",v),e.assets.loadTexture("DirtNormal",y),e.assets.loadTexture("DirtOcclusion",m),e.assets.loadGLTFFile(g,(function(t,e){e.saveObject("Arch",t.scene.children[0])})),e.assets.loadGLTFFile(p,(function(t,e){e.saveObject("WallTorch",t.scene.children[0])})),e.assets.loadAudioFile("Ambient",b),e.assets.loadFont("Number",k)]);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"white";t.clearRect(0,5*Z.height/8,Z.width,7*Z.height/8),t.fillStyle=n,t.fillText(e,Z.width/2,3*Z.height/4)}M.assets.progressHandler=function(t){C||T(x,t),(0,o.fo)(t)},M.assets.errorHandler=function(t){C=!0,T(x,t,"red"),(0,o.b0)(t)},function(t){return S.apply(this,arguments)}(M).then((function(t){t.start(new s.x)})).catch((function(t){console.log("Failed to load assets: "+t,t.stack)}))}))},7020:(t,e,n)=>{"use strict";n.d(e,{Z:()=>z});var i=n(445),r=n.n(i),a=n(352),o=n.n(a),s=n(8393),u=n.n(s),c=n(1056),l=n(1360),h=n(4713),f=n(8379),d=n(455),v=n(1184),y=n(2839),m=n(6281),g=n(1132),p=n(7758),b=n(7009),k=n(2823),A=n(7645),w=n(8676),Z=n(5496),M=n(1026),x=n(6606),C=n(9104),S=n(5759),T=o()(r()),E=u()(c),_=u()(l),P=u()(h),I=u()(f),L=u()(d),B=u()(v),D=u()(y),j=u()(m),R=u()(g),F=u()(p),N=u()(b),O=u()(k),G=u()(A),W=u()(w),U=u()(Z),J=u()(M),Y=u()(x),X=u()(C),H=u()(S);T.push([t.id,"@font-face {\n  font-family: 'Special Elite';\n  src: url("+E+");\n}\n\n@font-face {\n  font-family: 'Underground';\n  src: url("+_+");\n}\n\n@font-face {\n  font-family: 'A Another Tag';\n  src: url("+P+");\n}\n\n@font-face {\n  font-family: 'A Attack Graffiti';\n  src: url("+I+");\n}\n\n@font-face {\n  font-family: 'A Dripping Marker';\n  src: url("+L+");\n}\n\n@font-face {\n  font-family: 'Barrio Rifa';\n  src: url("+B+");\n}\n\n@font-face {\n  font-family: 'Bopollux';\n  src: url("+D+");\n}\n\n@font-face {\n  font-family: 'DJ Gross';\n  src: url("+j+");\n}\n\n@font-face {\n  font-family: 'Elevenoone';\n  src: url("+R+");\n}\n\n@font-face {\n  font-family: 'Gang Bang Crime';\n  src: url("+F+");\n}\n\n@font-face {\n  font-family: 'Graffonti';\n  src: url("+N+");\n}\n\n@font-face {\n  font-family: 'I Lost It In The Street';\n  src: url("+O+");\n}\n\n@font-face {\n  font-family: 'Insane';\n  src: url("+G+");\n}\n\n@font-face {\n  font-family: 'Muro SP';\n  src: url("+W+");\n}\n\n@font-face {\n  font-family: 'Neo Bopollux';\n  src: url("+U+");\n}\n\n@font-face {\n  font-family: 'Pixel Retro SP';\n  src: url("+J+");\n}\n\n@font-face {\n  font-family: 'Real Breakerz';\n  src: url("+Y+");\n}\n\n@font-face {\n  font-family: 'Reskagraf';\n  src: url("+X+");\n}\n\n@font-face {\n  font-family: 'Street Style';\n  src: url("+H+");\n}\n","",{version:3,sources:["webpack://./src/fonts.css"],names:[],mappings:"AAAA;EACE,4BAA4B;EAC5B,4CAAwC;AAC1C;;AAEA;EACE,0BAA0B;EAC1B,4CAAyC;AAC3C;;AAEA;EACE,4BAA4B;EAC5B,4CAAwC;AAC1C;;AAEA;EACE,gCAAgC;EAChC,4CAA4C;AAC9C;;AAEA;EACE,gCAAgC;EAChC,4CAA4C;AAC9C;;AAEA;EACE,0BAA0B;EAC1B,4CAAsC;AACxC;;AAEA;EACE,uBAAuB;EACvB,4CAAmC;AACrC;;AAEA;EACE,uBAAuB;EACvB,4CAAmC;AACrC;;AAEA;EACE,yBAAyB;EACzB,4CAAqC;AACvC;;AAEA;EACE,8BAA8B;EAC9B,4CAA0C;AAC5C;;AAEA;EACE,wBAAwB;EACxB,6CAAoC;AACtC;;AAEA;EACE,sCAAsC;EACtC,6CAAkD;AACpD;;AAEA;EACE,qBAAqB;EACrB,6CAAiC;AACnC;;AAEA;EACE,sBAAsB;EACtB,6CAAkC;AACpC;;AAEA;EACE,2BAA2B;EAC3B,6CAAuC;AACzC;;AAEA;EACE,6BAA6B;EAC7B,6CAAuC;AACzC;;AAEA;EACE,4BAA4B;EAC5B,6CAAwC;AAC1C;;AAEA;EACE,wBAAwB;EACxB,6CAAoC;AACtC;;AAEA;EACE,2BAA2B;EAC3B,6CAAuC;AACzC",sourcesContent:["@font-face {\n  font-family: 'Special Elite';\n  src: url(assets/fonts/special-elite.ttf);\n}\n\n@font-face {\n  font-family: 'Underground';\n  src: url(assets/fonts/08-underground.ttf);\n}\n\n@font-face {\n  font-family: 'A Another Tag';\n  src: url(assets/fonts/a-another-tag.ttf);\n}\n\n@font-face {\n  font-family: 'A Attack Graffiti';\n  src: url(assets/fonts/a-attack-graffiti.ttf);\n}\n\n@font-face {\n  font-family: 'A Dripping Marker';\n  src: url(assets/fonts/a-dripping-marker.ttf);\n}\n\n@font-face {\n  font-family: 'Barrio Rifa';\n  src: url(assets/fonts/barrio-rifa.ttf);\n}\n\n@font-face {\n  font-family: 'Bopollux';\n  src: url(assets/fonts/bopollux.ttf);\n}\n\n@font-face {\n  font-family: 'DJ Gross';\n  src: url(assets/fonts/dj-gross.ttf);\n}\n\n@font-face {\n  font-family: 'Elevenoone';\n  src: url(assets/fonts/elevenoone.ttf);\n}\n\n@font-face {\n  font-family: 'Gang Bang Crime';\n  src: url(assets/fonts/gang-bang-crime.ttf);\n}\n\n@font-face {\n  font-family: 'Graffonti';\n  src: url(assets/fonts/graffonti.ttf);\n}\n\n@font-face {\n  font-family: 'I Lost It In The Street';\n  src: url(assets/fonts/i-lost-it-in-the-street.ttf);\n}\n\n@font-face {\n  font-family: 'Insane';\n  src: url(assets/fonts/insane.ttf);\n}\n\n@font-face {\n  font-family: 'Muro SP';\n  src: url(assets/fonts/muro-sp.otf);\n}\n\n@font-face {\n  font-family: 'Neo Bopollux';\n  src: url(assets/fonts/neo-bopollux.ttf);\n}\n\n@font-face {\n  font-family: 'Pixel Retro SP';\n  src: url(assets/fonts/pixo-reto-sp.ttf);\n}\n\n@font-face {\n  font-family: 'Real Breakerz';\n  src: url(assets/fonts/real-breakerz.ttf);\n}\n\n@font-face {\n  font-family: 'Reskagraf';\n  src: url(assets/fonts/reskagraf.ttf);\n}\n\n@font-face {\n  font-family: 'Street Style';\n  src: url(assets/fonts/street-style.ttf);\n}\n"],sourceRoot:""}]);const z=T},28:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var i=n(445),r=n.n(i),a=n(352),o=n.n(a)()(r());o.push([t.id,"* {\n  margin: 0;\n  padding: 0;\n}\n\nbody,\nhtml {\n  height: 100%;\n}\n\ncanvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\ncanvas.overlay {\n  z-index: 10;\n}\n","",{version:3,sources:["webpack://./src/styles.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT,UAAU;AACZ;;AAEA;;EAEE,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;AACb",sourcesContent:["* {\n  margin: 0;\n  padding: 0;\n}\n\nbody,\nhtml {\n  height: 100%;\n}\n\ncanvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\ncanvas.overlay {\n  z-index: 10;\n}\n"],sourceRoot:""}]);const s=o},2805:(t,e,n)=>{"use strict";n.a(t,(async i=>{n.d(e,{KD:()=>b,t$:()=>w,cx:()=>Z,ug:()=>M,C2:()=>x,rY:()=>C,Wl:()=>S,UE:()=>T,Im:()=>E,eY:()=>_,dS:()=>P,Oi:()=>I,gl:()=>L,wg:()=>B,BT:()=>D,m_:()=>j,JX:()=>R,xd:()=>F,ud:()=>N,PT:()=>O,XP:()=>G,jp:()=>W,y4:()=>U,YQ:()=>J,A7:()=>Y,b0:()=>X,uf:()=>H,Or:()=>z,oH:()=>K});var r=n(8713);t=n.hmd(t);var a=i([r]);r=(a.then?await a:a)[0];let o=new("undefined"==typeof TextDecoder?(0,t.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});o.decode();let s=null;function u(){return null!==s&&s.buffer===r.memory.buffer||(s=new Uint8Array(r.memory.buffer)),s}function c(t,e){return o.decode(u().subarray(t,t+e))}const l=new Array(32).fill(void 0);l.push(void 0,null,!0,!1);let h=l.length;function f(t){h===l.length&&l.push(l.length+1);const e=h;return h=l[e],l[e]=t,e}function d(t){return l[t]}function v(t){const e=d(t);return function(t){t<36||(l[t]=h,h=t)}(t),e}let y=0,m=new("undefined"==typeof TextEncoder?(0,t.require)("util").TextEncoder:TextEncoder)("utf-8");const g="function"==typeof m.encodeInto?function(t,e){return m.encodeInto(t,e)}:function(t,e){const n=m.encode(t);return e.set(n),{read:t.length,written:n.length}};function p(t){return null==t}function b(t,e,n){var i=function(t,e,n){if(void 0===n){const n=m.encode(t),i=e(n.length);return u().subarray(i,i+n.length).set(n),y=n.length,i}let i=t.length,r=e(i);const a=u();let o=0;for(;o<i;o++){const e=t.charCodeAt(o);if(e>127)break;a[r+o]=e}if(o!==i){0!==o&&(t=t.slice(o)),r=n(r,i,i=o+3*t.length);const e=u().subarray(r+o,r+i);o+=g(t,e).written}return y=o,r}(t,r.__wbindgen_malloc,r.__wbindgen_realloc),a=y;return v(r.computeCatacombs(i,a,e,!p(n),p(n)?0:n))}function k(t,e){try{return t.apply(this,e)}catch(t){r.__wbindgen_exn_store(f(t))}}function A(t,e){return u().subarray(t/1,t/1+e)}function w(t,e){return f(JSON.parse(c(t,e)))}function Z(){return k((function(t,e,n){d(t).randomFillSync(A(e,n))}),arguments)}function M(t){v(t)}function x(){return k((function(t,e){d(t).getRandomValues(d(e))}),arguments)}function C(t){return f(d(t).process)}function S(t){const e=d(t);return"object"==typeof e&&null!==e}function T(t){return f(d(t).versions)}function E(t){return f(d(t).node)}function _(t){return"string"==typeof d(t)}function P(){return k((function(t,e){return f(n(9964)(c(t,e)))}),arguments)}function I(t){return f(d(t).crypto)}function L(t){return f(d(t).msCrypto)}function B(t,e){return f(new Function(c(t,e)))}function D(){return k((function(t,e){return f(d(t).call(d(e)))}),arguments)}function j(t){return f(d(t))}function R(){return k((function(){return f(self.self)}),arguments)}function F(){return k((function(){return f(window.window)}),arguments)}function N(){return k((function(){return f(globalThis.globalThis)}),arguments)}function O(){return k((function(){return f(n.g.global)}),arguments)}function G(t){return void 0===d(t)}function W(t){return f(d(t).buffer)}function U(t){return f(new Uint8Array(d(t)))}function J(t,e,n){d(t).set(d(e),n>>>0)}function Y(t){return d(t).length}function X(t){return f(new Uint8Array(t>>>0))}function H(t,e,n){return f(d(t).subarray(e>>>0,n>>>0))}function z(t,e){throw new Error(c(t,e))}function K(){return f(r.memory)}}))},8372:(t,e,n)=>{"use strict";var i=n(5701),r=n.n(i),a=n(7020);r()(a.Z,{insert:"head",singleton:!1}),a.Z.locals},4089:(t,e,n)=>{"use strict";var i=n(5701),r=n.n(i),a=n(28);r()(a.Z,{insert:"head",singleton:!1}),a.Z.locals},9964:t=>{function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=()=>[],e.resolve=e,e.id=9964,t.exports=e},1360:(t,e,n)=>{"use strict";t.exports=n.p+"8ed8e7146d15e378133f.ttf"},4713:(t,e,n)=>{"use strict";t.exports=n.p+"dc6d71259b111bbfc962.ttf"},8379:(t,e,n)=>{"use strict";t.exports=n.p+"761d6a56e9642eac840b.ttf"},455:(t,e,n)=>{"use strict";t.exports=n.p+"d0316bf95b135611d4be.ttf"},1184:(t,e,n)=>{"use strict";t.exports=n.p+"a52042cf28da3e3dcc33.ttf"},2839:(t,e,n)=>{"use strict";t.exports=n.p+"7905abd11030350456b3.ttf"},6281:(t,e,n)=>{"use strict";t.exports=n.p+"2e6bccb66c2303763d86.ttf"},1132:(t,e,n)=>{"use strict";t.exports=n.p+"c86dbc259f19c8093195.ttf"},7758:(t,e,n)=>{"use strict";t.exports=n.p+"9929dc3c9515e1c53074.ttf"},7009:(t,e,n)=>{"use strict";t.exports=n.p+"85d7cc1c0e5cdb69fb55.ttf"},2823:(t,e,n)=>{"use strict";t.exports=n.p+"28b4fa974d9bd886ac4c.ttf"},7645:(t,e,n)=>{"use strict";t.exports=n.p+"4ab0c56e9756640c03ca.ttf"},8676:(t,e,n)=>{"use strict";t.exports=n.p+"01d23588cd1de418a9fb.otf"},5496:(t,e,n)=>{"use strict";t.exports=n.p+"574c1a003f9514e043d9.ttf"},1026:(t,e,n)=>{"use strict";t.exports=n.p+"97f4599369620857f261.ttf"},6606:(t,e,n)=>{"use strict";t.exports=n.p+"381a47f5a48307de20f1.ttf"},9104:(t,e,n)=>{"use strict";t.exports=n.p+"a36cfc281401945d2070.ttf"},729:(t,e,n)=>{"use strict";t.exports=n.p+"8dd64aa54e1bb5ab4d97.json"},1056:(t,e,n)=>{"use strict";t.exports=n.p+"9dc7a59a9d7a92e12beb.ttf"},5759:(t,e,n)=>{"use strict";t.exports=n.p+"7d7a167b4562dbe40027.ttf"},972:(t,e,n)=>{"use strict";t.exports=n.p+"2947fb269a84c3f2089a.ogg"},1875:(t,e,n)=>{"use strict";t.exports=n.p+"a37a5af68584ae3f6b7f.glb"},8224:(t,e,n)=>{"use strict";t.exports=n.p+"c02b2486e142422bfdc5.glb"},5044:(t,e,n)=>{"use strict";t.exports=n.p+"cd8688c1aac462dc9692.jpg"},817:(t,e,n)=>{"use strict";t.exports=n.p+"f307160618879a00440c.jpg"},8880:(t,e,n)=>{"use strict";t.exports=n.p+"0ea3baee0e9e3958c3d5.jpg"},2486:(t,e,n)=>{"use strict";t.exports=n.p+"40392d2471e4e00783b7.jpg"},8704:(t,e,n)=>{"use strict";t.exports=n.p+"ebba4c80752cfbc8733d.jpg"},4072:(t,e,n)=>{"use strict";t.exports=n.p+"995474a1cf588df85311.jpg"},2038:(t,e,n)=>{"use strict";t.exports=n.p+"9dc585d21196adaf6bda.jpg"},9460:(t,e,n)=>{"use strict";t.exports=n.p+"7540bd7fa73b533e8b74.jpg"},3902:(t,e,n)=>{"use strict";t.exports=n.p+"759e66f23de7e6d60812.jpg"},5042:()=>{},8713:(t,e,n)=>{"use strict";var i=([i])=>n.v(e,t.id,"2d78b98eb495d9e470c9",{"./prime_number_catacombs_bg.js":{__wbindgen_json_parse:i.t$,__wbg_randomFillSync_64cc7d048f228ca8:i.cx,__wbindgen_object_drop_ref:i.ug,__wbg_getRandomValues_98117e9a7e993920:i.C2,__wbg_process_2f24d6544ea7b200:i.rY,__wbindgen_is_object:i.Wl,__wbg_versions_6164651e75405d4a:i.UE,__wbg_node_4b517d861cbcb3bc:i.Im,__wbindgen_is_string:i.eY,__wbg_modulerequire_3440a4bcf44437db:i.dS,__wbg_crypto_98fc271021c7d2ad:i.Oi,__wbg_msCrypto_a2cdb043d2bfe57f:i.gl,__wbg_newnoargs_be86524d73f67598:i.wg,__wbg_call_888d259a5fefc347:i.BT,__wbindgen_object_clone_ref:i.m_,__wbg_self_c6fbdfc2918d5e58:i.JX,__wbg_window_baec038b5ab35c54:i.xd,__wbg_globalThis_3f735a5746d41fbd:i.ud,__wbg_global_1bc0b39582740e95:i.PT,__wbindgen_is_undefined:i.XP,__wbg_buffer_397eaa4d72ee94dd:i.jp,__wbg_new_a7ce447f15ff496f:i.y4,__wbg_set_969ad0a60e51d320:i.YQ,__wbg_length_1eb8fc608a0d4cdb:i.A7,__wbg_newwithlength_929232475839a482:i.b0,__wbg_subarray_8b658422a224f479:i.uf,__wbindgen_throw:i.Or,__wbindgen_memory:i.oH}});n.a(t,(t=>{var e=t([n(2805)]);return e.then?e.then(i):i(e)}),1)}},s={};function u(t){var e=s[t];if(void 0!==e)return e.exports;var n=s[t]={id:t,loaded:!1,exports:{}};return o[t].call(n.exports,n,n.exports,u),n.loaded=!0,n.exports}u.m=o,u.amdD=function(){throw new Error("define cannot be used indirect")},u.amdO={},t="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n=t=>{t&&(t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},i=t=>!--t.r&&t(),r=(t,e)=>t?t.push(e):i(e),u.a=(a,o,s)=>{var u,c,l,h=s&&[],f=a.exports,d=!0,v=!1,y=(e,n,i)=>{v||(v=!0,n.r+=e.length,e.map(((e,r)=>e[t](n,i))),v=!1)},m=new Promise(((t,e)=>{l=e,c=()=>(t(f),n(h),h=0)}));m[e]=f,m[t]=(t,e)=>{if(d)return i(t);u&&y(u,t,e),r(h,t),m.catch(e)},a.exports=m,o((a=>{if(!a)return c();var o,s;u=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[t])return a;if(a.then){var o=[];a.then((t=>{s[e]=t,n(o),o=0}));var s={};return s[t]=(t,e)=>(r(o,t),a.catch(e)),s}}var u={};return u[t]=t=>i(t),u[e]=a,u})))(a);var l=new Promise(((t,n)=>{(o=()=>t(s=u.map((t=>t[e])))).r=0,y(u,o,n)}));return o.r?l:s})).then(c,l),d=!1},a=[],u.O=(t,e,n,i)=>{if(!e){var r=1/0;for(l=0;l<a.length;l++){for(var[e,n,i]=a[l],o=!0,s=0;s<e.length;s++)(!1&i||r>=i)&&Object.keys(u.O).every((t=>u.O[t](e[s])))?e.splice(s--,1):(o=!1,i<r&&(r=i));if(o){a.splice(l--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var l=a.length;l>0&&a[l-1][2]>i;l--)a[l]=a[l-1];a[l]=[e,n,i]},u.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return u.d(e,{a:e}),e},u.d=(t,e)=>{for(var n in e)u.o(e,n)&&!u.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),u.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),u.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),u.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),u.p="/PrimeNumberCatacombsWeb/",(()=>{var t={179:0};u.O.j=e=>0===t[e];var e=(e,n)=>{var i,r,[a,o,s]=n,c=0;for(i in o)u.o(o,i)&&(u.m[i]=o[i]);if(s)var l=s(u);for(e&&e(n);c<a.length;c++)r=a[c],u.o(t,r)&&t[r]&&t[r][0](),t[a[c]]=0;return u.O(l)},n=self.webpackChunkprime_number_catacombs=self.webpackChunkprime_number_catacombs||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),u.v=(t,e,n,i)=>{var r=fetch(u.p+""+n+".module.wasm");return"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(r,i).then((e=>Object.assign(t,e.instance.exports))):r.then((t=>t.arrayBuffer())).then((t=>WebAssembly.instantiate(t,i))).then((e=>Object.assign(t,e.instance.exports)))};var c=u.O(void 0,[856],(()=>u(8809)));c=u.O(c)})();
//# sourceMappingURL=main.bundle.js.map